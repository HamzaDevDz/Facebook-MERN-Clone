(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{166:function(e,t,s){},167:function(e,t,s){},192:function(e,t,s){},194:function(e,t,s){},195:function(e,t,s){},196:function(e,t,s){},197:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){},200:function(e,t,s){},201:function(e,t,s){},202:function(e,t,s){},203:function(e,t,s){},204:function(e,t,s){},205:function(e,t,s){},206:function(e,t,s){"use strict";s.r(t);var n,a,r,c,i=s(0),o=s.n(i),u=s(20),l=s.n(u),_=(s(166),s(63)),d=s(25),m=s(6),j=s(255),b=(s(167),s(260)),f=s(12),p=s(9),h=s(10),O=s.n(h),x=s(19),g=s(13),v=s(122),N="https://facebook-clone-mern-hamza.herokuapp.com",y=function(e){return N+"/media/retrieve/?filename="+e},k=new(s.n(v).a)("67843c3bf2c33b4e1d28",{cluster:"eu"}),S=s(16),U=s.n(S),w=Object(g.b)("upload/user",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/upload",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),C=Object(g.b)("/retrieve/user",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/retrieve",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),q=Object(g.b)("user/synchronisation",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/synchronisation",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),B=Object(g.c)({name:"login",initialState:{user:null,err:null,statusLogin:null},reducers:{resetError:function(e){e.err=null},retrieveLocalUser:function(e){var t=localStorage.getItem("user");console.log(t),t?(console.log("user found"),e.user=JSON.parse(t)):console.log("user not found")},logOut:function(e){e.user=null,localStorage.removeItem("user")}},extraReducers:(n={},Object(p.a)(n,w.fulfilled,(function(e,t){e.user=t.payload})),Object(p.a)(n,C.fulfilled,(function(e,t){e.statusLogin=null,localStorage.setItem("user",JSON.stringify(t.payload)),e.user=t.payload})),Object(p.a)(n,C.rejected,(function(e,t){e.statusLogin=null;var s=t.payload.error.split(" "),n=s[s.length-1];e.err=parseInt(n)})),Object(p.a)(n,C.pending,(function(e){e.statusLogin="wait"})),Object(p.a)(n,q.fulfilled,(function(e,t){localStorage.setItem("user",JSON.stringify(t.payload)),e.user=t.payload})),n)}),P=B.actions,E=P.resetError,D=P.retrieveLocalUser,I=P.logOut,F=function(e){return e.login.user},V=function(e){return e.login.err},W=function(e){return e.login.statusLogin},M=B.reducer,R=s(261),A=s(266),L=s(248),T=s(256),z=s(1),J=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(""),r=Object(m.a)(a,2),c=r[0],o=r[1],u=Object(i.useState)(""),l=Object(m.a)(u,2),_=l[0],p=l[1],h=Object(d.g)(),O=Object(f.b)(),x=Object(f.c)(F),g=Object(f.c)(V),v=Object(f.c)(W);Object(i.useEffect)((function(){document.querySelector(".login__form__error").style.display="none"}),[]),Object(i.useEffect)((function(){null!==x?(O(q({idUser:x._id})),h.push("/home")):O(D())}),[x]),Object(i.useEffect)((function(){if(null!==g){switch(document.querySelector(".login__form__error").style.display="flex",g){case 500:p("Internal Server Error");break;case 404:p("Username not found");break;default:p("Incorrect password")}setTimeout((function(){document.querySelector(".login__form__error").style.display="none",p(""),O(E())}),5e3)}}),[g]),Object(i.useEffect)((function(){null!==v?document.querySelector(".login__form__wait").style.display="flex":(document.querySelector(".login__form__wait").style.display="none",n(""),o(""))}),[v]);return Object(z.jsxs)("div",{className:"login",children:[Object(z.jsx)("img",{src:"fb_img.png",alt:"",className:"login__img"}),Object(z.jsx)("form",{className:"login__form",children:Object(z.jsxs)(L.a,{className:"login__form__formControl",children:[Object(z.jsx)(b.a,{label:"Username",variant:"outlined",className:"login__form__username login__form__input",value:s,onChange:function(e){return n(e.target.value)},disabled:null!==v}),Object(z.jsx)(b.a,{label:"Password",variant:"outlined",type:"Password",className:"login__form__password login__form__input",value:c,onChange:function(e){return o(e.target.value)},disabled:null!==v}),Object(z.jsxs)(R.a,{severity:"error",className:"login__form__error",children:[Object(z.jsx)(A.a,{children:"Error"}),_]}),Object(z.jsx)(j.a,{variant:"contained",color:"primary",className:"login__form__btn",onClick:function(e){if(e.preventDefault(),console.log("click login"),s&&c){var t={username:s.toLocaleLowerCase(),password:c};O(C(t))}},disabled:!s||!c||null!==v,type:"submit",children:"Login"}),Object(z.jsx)(T.a,{className:"login__form__wait",style:{display:"none"}})]})}),Object(z.jsx)(j.a,{className:"login__signUp",onClick:function(){h.push("/signUp")},children:"Sign Up"})]})},H=(s(192),s(89)),G=s.n(H),$=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(""),r=Object(m.a)(a,2),c=r[0],o=r[1],u=Object(i.useState)(""),l=Object(m.a)(u,2),_=l[0],p=l[1],h=Object(i.useState)(""),O=Object(m.a)(h,2),x=O[0],g=O[1],v=Object(i.useState)(void 0),y=Object(m.a)(v,2),k=y[0],S=y[1],C=Object(i.useState)(""),q=Object(m.a)(C,2),B=q[0],P=q[1],E=Object(i.useState)(""),D=Object(m.a)(E,2),I=D[0],V=D[1],W=Object(i.useState)(""),M=Object(m.a)(W,2),R=M[0],A=M[1],L=Object(d.g)(),T=Object(f.b)(),J=Object(f.c)(F);Object(i.useEffect)((function(){null!==J&&L.push("/home")}),[J]);return Object(z.jsxs)("div",{className:"signUp",children:[Object(z.jsx)("img",{src:"fb_img.png",alt:"",className:"signUp__img"}),Object(z.jsxs)("form",{className:"signUp__form",children:[Object(z.jsx)(b.a,{label:"Name",variant:"outlined",className:"signUp__form__name signUp__form__input",value:s,onChange:function(e){return n(e.target.value)}}),Object(z.jsx)(b.a,{label:"First Name",variant:"outlined",className:"signUp__form__firstName signUp__form__input",value:c,onChange:function(e){return o(e.target.value)}}),Object(z.jsx)(b.a,{label:"Email",variant:"outlined",className:"signUp__form__email signUp__form__input",value:_,onChange:function(e){return p(e.target.value)}}),Object(z.jsx)(b.a,{label:"Phone Number",variant:"outlined",className:"signUp__form__phone signUp__form__input",value:x,onChange:function(e){return g(e.target.value)}}),Object(z.jsxs)("label",{className:"signUp__form__label signUp__form__input",htmlFor:"video",children:[Object(z.jsxs)(j.a,{variant:"contained",color:"primary",component:"span",children:[Object(z.jsx)(G.a,{className:"signUp__form__label__icon"}),"Upload Photo"]}),Object(z.jsx)("input",{id:"video",style:{display:"none"},type:"file",onChange:function(e){e.target.files[0]&&S(e.target.files[0])}})]}),Object(z.jsx)(b.a,{label:"Username",variant:"outlined",className:"signUp__form__username signUp__form__input",value:B,onChange:function(e){return P(e.target.value)}}),Object(z.jsx)(b.a,{label:"Password",variant:"outlined",className:"signUp__form__password signUp__form__input",type:"Password",value:I,onChange:function(e){return V(e.target.value)}}),Object(z.jsx)(b.a,{label:"Confirm Password",variant:"outlined",className:"signUp__form__passwordConfirm signUp__form__input",type:"Password",value:R,onChange:function(e){return A(e.target.value)}}),Object(z.jsx)(j.a,{variant:"contained",color:"primary",className:"signUp__form__btn",onClick:function(e){if(e.preventDefault(),s&&c&&B&&I&&R)if(I===R){if(k){var t=new FormData;t.append("file",k),U.a.post(N+"/media/upload",t).then((function(e){var t={name:s.toUpperCase(),firstName:c,email:_||"",phone:x||"",imgUserName:e.data?e.data:"",username:B.toLowerCase(),password:I};console.log(t),T(w(t)),n(""),o(""),p(""),g(""),P(""),V(""),A("")}))}}else alert("Password is not the same !");else alert("Something wrong !")},disabled:!(s&&c&&B&&I&&R),children:"Sign Up"})]}),Object(z.jsx)(j.a,{className:"signUp__login",onClick:function(){L.push("/login")},children:"Login"})]})},K=(s(194),s(195),s(131)),Q=s.n(K),X=s(132),Y=s.n(X),Z=s(92),ee=s.n(Z),te=s(128),se=s.n(te),ne=s(267),ae=s(93),re=s.n(ae),ce=s(133),ie=s.n(ce),oe=s(134),ue=s.n(oe),le=s(136),_e=s.n(le),de=s(135),me=s.n(de),je=s(254),be=Object(g.b)("user/search",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/search",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),fe=Object(g.b)("user/invite",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/invite",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),pe=Object(g.b)("user/disinvite",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/disinvite",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),he=Object(g.b)("user/get",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get(N+"/user/get/?idUser="+t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Oe=Object(g.b)("user/getRequesters",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/requesters",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),xe=Object(g.b)("user/refuseFriend",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/refuseFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),ge=Object(g.c)({name:"header",initialState:{search:{friends:[],statusSearch:!1},notification:{requesters:[]}},reducers:{},extraReducers:(a={},Object(p.a)(a,be.pending,(function(e,t){e.search.statusSearch=!0,e.search.friends=[]})),Object(p.a)(a,be.fulfilled,(function(e,t){e.search.statusSearch=!1,e.search.friends=t.payload})),Object(p.a)(a,fe.fulfilled,(function(e,t){})),Object(p.a)(a,pe.fulfilled,(function(e,t){})),Object(p.a)(a,he.fulfilled,(function(e,t){e.notification.requesters.push(t.payload)})),Object(p.a)(a,Oe.fulfilled,(function(e,t){e.notification.requesters=[],e.notification.requesters=t.payload})),a)}),ve=function(e){return e.header.search.friends},Ne=function(e){return e.header.search.statusSearch},ye=function(e){return e.header.notification.requesters},ke=ge.reducer,Se=s(269),Ue=s(130),we=s.n(Ue),Ce=s(268),qe=Object(g.b)("user/addFriend",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/addFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Be=Object(g.b)("user/removeFriend",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/removeFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Pe=Object(g.b)("user/getFriends",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/getFriends",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Ee=Object(g.c)({name:"friendsBox",initialState:{friends:[]},reducers:{},extraReducers:Object(p.a)({},Pe.fulfilled,(function(e,t){e.friends=t.payload}))}),De=function(e){return e.friendsBox.friends},Ie=Ee.reducer,Fe=function(){var e=Object(f.c)(F),t=Object(f.b)(),s=Object(d.g)(),n=Object(i.useState)(!1),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(i.useState)(""),u=Object(m.a)(o,2),l=u[0],_=u[1],j=Object(i.useState)(!1),b=Object(m.a)(j,2),p=b[0],h=b[1],O=Object(i.useState)(!1),x=Object(m.a)(O,2),g=x[0],v=x[1],N=Object(f.c)(ve),S=Object(f.c)(Ne),U=Object(f.c)(ye);Object(i.useEffect)((function(){var e=document.querySelector(".home"),t=document.querySelector(".friendsBox"),s=document.querySelector(".messages");null!==e&&(p?(e.style.filter="brightness(80%)",t.style.filter="brightness(80%)",s.style.filter="brightness(80%)"):(e.style.filter="brightness(100%)",t.style.filter="brightness(100%)",s.style.filter="brightness(100%)"))}),[p]),Object(i.useEffect)((function(){""!==l&&t(be({search:l,idUser:e._id}))}),[l]);document.onclick=function(e){var t=document.querySelector(".header__search__barSearch__input");if(t===document.activeElement&&h(!0),p&&!t.contains(e.target)){var s=document.querySelector(".header__searchBox");null!==s&&s.contains(e.target)||h(!1)}if(r){var n=document.querySelector(".header__account__btnPlus");if(null!==n)if(!n.contains(e.target))document.querySelector(".header__plus").contains(e.target)||(c(!1),document.querySelector(".header__account__btnPlus__icon").style.color="#6E6F70")}if(g){var a=document.querySelector(".header__account__btnNotification");if(null!==a)if(!a.contains(e.target))document.querySelector(".header__notification").contains(e.target)||(v(!1),document.querySelector(".header__account__btnNotification__icon").style.color="#6E6F70")}};return Object(i.useEffect)((function(){null!==e&&0!==e.length||s.push("/login"),null!==e&&t(Oe({myIdUser:e._id}));var n=k.subscribe("users");n.bind("inserted",(function(s){console.log("inserted user Client"),null!==e&&t(be({search:l,idUser:e._id}))})),n.bind("updated",(function(s){console.log("updated user Client"),null!==e&&(t(q({idUser:e._id})),t(be({search:l,idUser:e._id})),t(Oe({myIdUser:e._id})),t(Pe({myIdUser:e._id})))}))}),[]),Object(z.jsxs)("div",{className:"header",children:[Object(z.jsxs)("div",{className:"header__search",children:[Object(z.jsx)("img",{className:"header__search__img",src:"icons/facebook_icon.png",alt:""}),Object(z.jsxs)("div",{className:"header__search__barSearch",children:[Object(z.jsx)(se.a,{className:"header__search__barSearch__icon",fontSize:"medium",color:"action"}),Object(z.jsx)("input",{className:"header__search__barSearch__input",placeholder:"Search Friends",type:"text",value:l,onChange:function(e){return _(e.target.value)}})]})]}),p&&0!==l.length?Object(z.jsx)("div",{className:"header__searchBox",children:S?Object(z.jsx)(Se.a,{color:"secondary"}):0!==N.length?N.map((function(s){return Object(z.jsxs)("div",{className:"header__searchBox__friend",children:[Object(z.jsxs)("div",{className:"header__searchBox__friend__information",children:[Object(z.jsx)(ne.a,{src:y(s.imgUserName),alt:s.username.toUpperCase(),className:"header__searchBox__friend__information__avatar"}),Object(z.jsxs)("span",{children:[s.firstName," ",s.name]})]}),e.idFriends.includes(String(s._id))?Object(z.jsx)(Ce.a,{variant:"text",className:"header__searchBox__friend__btn",size:"small",onClick:function(){t(Be({idUser:e._id,idFriend:s._id}))},children:"Remove as friend"}):e.idRequests.includes(String(s._id))?Object(z.jsxs)("div",{className:"header__notification__requester__btn",children:[Object(z.jsx)(Ce.a,{onClick:function(){t(qe({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnAccept",size:"small",variant:"text",children:"Accept"}),Object(z.jsx)(Ce.a,{onClick:function(){t(xe({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnRefuse",size:"small",color:"secondary",variant:"text",children:"Refuse"})]}):s.idRequests.includes(String(e._id))?Object(z.jsx)(Ce.a,{variant:"outlined",className:"header__searchBox__friend__btn",size:"small",onClick:function(){t(pe({idUser:e._id,idRequest:s._id}))},children:"Disinvite"}):Object(z.jsx)(Ce.a,{variant:"contained",size:"small",className:"header__searchBox__friend__btn",onClick:function(){t(fe({idUser:e._id,idRequest:s._id}))},children:"Invite"})]},s._id)})):Object(z.jsxs)("div",{className:"header__searchBox__noresult",children:[Object(z.jsx)(we.a,{className:"header__searchBox__noresult__icon"}),Object(z.jsx)("p",{className:"header__searchBox__noresult__text",children:"No Result"})]})}):"",Object(z.jsxs)("div",{className:"header__nav",children:[Object(z.jsxs)("div",{className:"header__nav__btn header__nav__home selected",children:[Object(z.jsx)(Q.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"}),Object(z.jsx)("span",{})]}),Object(z.jsx)("div",{className:"header__nav__btn header__nav__video",children:Object(z.jsx)(Y.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"})}),Object(z.jsx)("div",{className:"header__nav__btn header__nav__marketplace",children:Object(z.jsx)(ee.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"})})]}),Object(z.jsxs)("div",{className:"header__account",children:[Object(z.jsxs)("div",{className:"header__account__user",children:[Object(z.jsx)(ne.a,{className:"header__account__user__avatar",alt:"",src:y(e?e.imgUserName:"")}),Object(z.jsxs)("strong",{className:"header__account__user__text",children:[e?e.firstName:""," ",e?e.name:""]})]}),Object(z.jsx)(je.a,{className:"header__account__btn header__account__btnChat",children:Object(z.jsx)(re.a,{className:"header__account__btn__icon",fontSize:"small",color:"action"})}),Object(z.jsx)(je.a,{className:"header__account__btn header__account__btnNotification",onClick:function(){g?(v(!1),document.querySelector(".header__account__btnNotification__icon").style.color="#6E6F70"):(v(!0),document.querySelector(".header__account__btnNotification__icon").style.color="blue")},children:Object(z.jsx)(ie.a,{className:"header__account__btn__icon header__account__btnNotification__icon",fontSize:"small",color:"action"})}),Object(z.jsx)(je.a,{className:"header__account__btn header__account__btnPlus",onClick:function(e){r?(c(!1),document.querySelector(".header__account__btnPlus__icon").style.color="#6E6F70"):(c(!0),document.querySelector(".header__account__btnPlus__icon").style.color="blue")},children:Object(z.jsx)(ue.a,{className:"header__account__btn__icon header__account__btnPlus__icon",fontSize:"small",color:"action"})})]}),r?Object(z.jsxs)("div",{className:"header__plus",children:[Object(z.jsxs)("div",{className:"header__plus__btn header__plus__profile",children:[Object(z.jsx)(ne.a,{className:"header__plus__profile__avatar",alt:e.username[0].toUpperCase(),src:y(e.imgUserName)}),Object(z.jsxs)("div",{className:"header__plus__profile__text",children:[Object(z.jsxs)("strong",{children:[e.firstName," ",e.name]}),Object(z.jsx)("p",{className:"header__plus__profile__text__placeholder",children:"Go to the profile"})]})]}),Object(z.jsxs)("div",{className:"header__plus__btn header__plus__settings",children:[Object(z.jsx)(me.a,{className:"header__plus__btn__icon"})," Setting"]}),Object(z.jsxs)("div",{className:"header__plus__btn header__plus__logout",onClick:function(){t(I()),s.push("/login")},children:[Object(z.jsx)(_e.a,{className:"header__plus__btn__icon"}),"Log Out"]})]}):"",g?Object(z.jsx)("div",{className:"header__notification",children:0!==U.length?U.map((function(s){return Object(z.jsxs)("div",{className:"header__notification__requester",children:[Object(z.jsxs)("div",{className:"header__notification__requester__information",children:[Object(z.jsx)(ne.a,{className:"header__notification__requester__information__avatar",src:y(s.imgUserName),alt:s.username[0].toUpperCase()}),s.firstName," ",s.name]}),Object(z.jsxs)("div",{className:"header__notification__requester__btn",children:[Object(z.jsx)(Ce.a,{onClick:function(){t(qe({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnAccept",size:"small",variant:"text",children:"Accept"}),Object(z.jsx)(Ce.a,{onClick:function(){t(xe({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnRefuse",size:"small",color:"secondary",variant:"text",children:"Refuse"})]})]},"request-"+s._id)})):Object(z.jsx)("div",{className:"header__notification__noresult",children:"No one invited you !"})}):""]})},Ve=(s(196),s(137)),We=s.n(Ve),Me=Object(g.b)("post/retrieve",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get(N+"/post/retrieve").then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Re=Object(g.b)("posts/upload",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/upload",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Ae=Object(g.b)("posts/comment/upload",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/comment/upload",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Le=Object(g.b)("post/like",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/like",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Te=Object(g.b)("post/dislike",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/dislike",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),ze=Object(g.b)("post/comment/like",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/comment/like",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Je=Object(g.b)("post/comment/dislike",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/comment/dislike",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),He=Object(g.c)({name:"posts",initialState:{posts:[],statusLikePost:!1,statusLikeComment:!1},reducers:{setLikePostById:{reducer:function(e,t){var s=t.payload.idPost,n=t.payload.username,a=e.posts.findIndex((function(e){return e._id===s}));-1!==a&&(e.posts[a].likes.includes(n)?e.posts[a].likes.splice(e.posts[a].likes.indexOf(n),1):e.posts[a].likes.push(n))},prepare:function(e,t){return{payload:{idPost:e,username:t}}}},setLikeCommentById:{reducer:function(e,t){var s=e.posts.findIndex((function(e){return e._id===t.payload.idPost}));if(-1!==s){var n=e.posts[s].comments.findIndex((function(e){return e._id===t.payload.idComment}));-1!==n&&(e.posts[s].comments[n].likes.includes(t.payload.username)?e.posts[s].comments[n].likes.splice(e.posts[s].comments[n].likes.indexOf(t.payload.username),1):e.posts[s].comments[n].likes.push(t.payload.username))}},prepare:function(e,t,s){return{payload:{idPost:e,idComment:t,username:s}}}}},extraReducers:(r={},Object(p.a)(r,Me.fulfilled,(function(e,t){e.posts=t.payload})),Object(p.a)(r,Re.fulfilled,(function(e,t){console.log("Post upload successfully !")})),Object(p.a)(r,Ae.fulfilled,(function(e,t){console.log("Comment upload successfully !")})),Object(p.a)(r,Le.fulfilled,(function(e,t){})),Object(p.a)(r,Le.pending,(function(e,t){})),Object(p.a)(r,Te.fulfilled,(function(e,t){})),Object(p.a)(r,Te.pending,(function(e,t){})),Object(p.a)(r,ze.fulfilled,(function(e,t){})),Object(p.a)(r,Je.fulfilled,(function(e,t){})),r)}),Ge=He.actions,$e=Ge.setLikeCommentById,Ke=Ge.setLikePostById,Qe=function(e){return e.posts.posts},Xe=He.reducer,Ye=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(void 0),r=Object(m.a)(a,2),c=(r[0],r[1]),o=Object(i.useState)(void 0),u=Object(m.a)(o,2),l=u[0],_=u[1],d=Object(i.useState)(void 0),j=Object(m.a)(d,2),b=(j[0],j[1]),p=Object(f.c)(F),h=Object(i.useState)(""),O=Object(m.a)(h,2),x=O[0],g=O[1],v=Object(f.b)();return Object(i.useEffect)((function(){g(y(p.imgUserName))}),[]),Object(z.jsx)("form",{className:"feed__upload",children:Object(z.jsxs)(L.a,{style:{width:"98%"},children:[Object(z.jsxs)("div",{className:"feed__upload__caption",children:[Object(z.jsx)(ne.a,{className:"feed__upload__caption__avatar",alt:"H",src:x}),Object(z.jsx)("input",{type:"text",placeholder:"Caption",className:"feed__upload__caption__input",value:s,onChange:function(e){return n(e.target.value)}})]}),Object(z.jsxs)("div",{className:"feed__upload__multi",children:[Object(z.jsxs)("label",{className:"feed__upload__multi__label feed__upload__multi__image",htmlFor:"media",children:[Object(z.jsx)(G.a,{className:"feed__upload__multi__label__icon",color:"error"}),"Image / Video",Object(z.jsx)("input",{id:"media",style:{display:"none"},type:"file",onChange:function(e){e.target.files[0]&&_(e.target.files[0])}})]}),Object(z.jsxs)("label",{className:"feed__upload__multi__label feed__upload__multi__mood",htmlFor:"mood",children:[Object(z.jsx)(We.a,{className:"feed__upload__multi__label__icon",color:"error"}),"Mood"]})]}),Object(z.jsx)("button",{type:"submit",className:"feed__upload__btn",style:{display:"none"},onClick:function(e){if(e.preventDefault(),s){var t={username:p.username,imgUser:p.imgUserName,caption:s,timestamp:Date.now(),likes:[],comments:[],mood:""};if(l){var a=new FormData;a.append("file",l),U.a.post(N+"/media/upload",a).then((function(e){t.imgPost=e.data,v(Re(t))}))}n(""),_(void 0),c(void 0),b(void 0)}},children:"Upload"})]})})},Ze=(s(197),s(198),s(95)),et=s.n(Ze),tt=s(139),st=s.n(tt),nt=(s(199),s(94)),at=function(e){var t=e.idPost,s=e.idComment,n=(e.imgUserName,e.username),a=e.timestamp,r=e.text,c=e.likes,o=Object(f.b)(),u=Object(f.c)(F),l=Object(i.useState)(0),_=Object(m.a)(l,2),d=_[0],j=_[1],b=Object(i.useState)(0),p=Object(m.a)(b,2),h=p[0],O=p[1];Object(i.useEffect)((function(){c.includes(u.username)?document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="blue":document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="gray"}),[]);return Object(z.jsxs)("div",{className:"comment",id:s,children:[Object(z.jsx)(ne.a,{className:"comment__avatar",alt:u.username[0].toUpperCase(),src:y(u.imgUserName)}),Object(z.jsxs)("div",{className:"comment__userAndTextAndStates",children:[Object(z.jsx)("strong",{className:"comment__userAndTextAndStates__user",children:n}),Object(z.jsx)("p",{className:"comment__userAndTextAndStates__text",children:r}),Object(z.jsxs)("div",{className:"comment__userAndTextAndStates__states",children:[Object(z.jsxs)("div",{className:"comment__userAndTextAndStates__states__likes",onClick:function(){clearTimeout(d),console.log(s),c.includes(u.username)?(document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="gray",1===h?O(0):(O(1),j(setTimeout((function(){o(Je({idPost:t,idComment:s,username:u.username})),O(0)}),3e3)))):(document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="blue",1===h?O(0):(O(1),j(setTimeout((function(){o(ze({idPost:t,idComment:s,username:u.username})),O(0)}),3e3)))),o($e(t,s,u.username))},children:[Object(z.jsx)(et.a,{className:"comment__userAndTextAndStates__states__likes__icon",fontSize:"small",id:"comment_likes_".concat(t,"_").concat(s)}),c.length]}),Object(z.jsx)("div",{className:"comment__userAndTextAndStates__states__timestamp",children:Object(nt.calculateDifferenceTimestamps)(a,Date.now())})]})]})]})},rt=(s(200),s(252)),ct=function(e){var t=e.idPost,s=Object(f.c)(F),n=Object(i.useState)(""),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(f.b)();return Object(z.jsx)("form",{className:"feed__posts__post__uploadComment",children:Object(z.jsxs)(L.a,{className:"feed__posts__post__uploadComment__formControl",children:[Object(z.jsx)(ne.a,{className:"feed__posts__post__uploadComment__avatar",alt:s.username[0].toUpperCase(),src:y(s.imgUserName)}),Object(z.jsx)(rt.a,{className:"feed__posts__post__uploadComment__input",placeholder:"Comment",value:r,onChange:function(e){return c(e.target.value)}}),Object(z.jsx)("button",{className:"feed__posts__post__uploadComment__btn",style:{display:"none"},onClick:function(e){e.preventDefault();var n={idPost:t,comment:{username:s.username,imgUserName:s.imgUserName,text:r,timestamp:Date.now(),likes:[]}};o(Ae(n)),c("")}})]})})},it=s(138),ot=s.n(it),ut=s(140),lt=s.n(ut),_t=function(e){var t=e.idPost,s=e.imgUser,n=e.username,a=e.timestamp,r=e.caption,c=e.imgPost,o=e.likes,u=e.comments,l=Object(f.b)(),_=Object(f.c)(F),d=Object(i.useState)(0),b=Object(m.a)(d,2),p=b[0],h=b[1],O=Object(i.useState)(0),x=Object(m.a)(O,2),g=x[0],v=x[1],N=Object(i.useState)(!0),k=Object(m.a)(N,2),S=k[0],U=k[1];Object(i.useEffect)((function(){o.includes(_.username)?document.getElementById("post_likes_".concat(t)).style.color="blue":document.getElementById("post_likes_".concat(t)).style.color="gray"}),[]);return Object(z.jsxs)("div",{className:"feed__posts__post",id:"feed__posts__post__"+t,children:[Object(z.jsxs)("div",{className:"feed__posts__post__head",children:[Object(z.jsx)(ne.a,{className:"feed__posts__post__head__avatar",alt:n[0],src:y(s)}),Object(z.jsxs)("div",{className:"feed__posts__post__head__user",children:[Object(z.jsx)("strong",{className:"feed__posts__post__head__user__username",children:n}),Object(z.jsx)("span",{className:"feed__posts__post__head__user__timestamp",children:Object(nt.calculateDifferenceTimestamps)(a,Date.now())})]})]}),Object(z.jsx)("div",{className:"feed__posts__post__caption",children:r}),null!==c?[".jpg",".jpeg",".png"].includes(ot.a.extname(c))?Object(z.jsx)("img",{src:y(c),alt:"",className:"feed__posts__post__media"}):Object(z.jsx)("video",{controls:!0,className:"feed__posts__post__media",children:Object(z.jsx)("source",{src:y(c)})}):"",Object(z.jsxs)("div",{className:"feed__posts__post__states",children:[Object(z.jsxs)(je.a,{className:"feed__posts__post__states__likes",onClick:function(){clearTimeout(p),o.includes(_.username)?(document.getElementById("post_likes_".concat(t)).style.color="gray",1===g?v(0):(v(1),h(setTimeout((function(){l(Te({idPost:t,username:_.username})),v(0)}),3e3)))):(document.getElementById("post_likes_".concat(t)).style.color="blue",1===g?v(0):(v(1),h(setTimeout((function(){l(Le({idPost:t,username:_.username})),v(0)}),3e3)))),l(Ke(t,_.username))},children:[Object(z.jsx)(et.a,{className:"feed__posts__post__states__likes__icon",id:"post_likes_".concat(t)}),o.length]}),Object(z.jsxs)(je.a,{className:"feed__posts__post__states__comments",onClick:function(e){U(!S)},children:[Object(z.jsx)(st.a,{className:"feed__posts__post__states__comments__icon",style:{color:"red"}}),Object(z.jsx)("span",{children:u.length})]})]}),Object(z.jsx)(ct,{idPost:t}),0!==u.length?S?Object(z.jsx)("div",{className:"feed__posts__post__comments",children:u.map((function(e){return Object(z.jsx)(at,{idPost:t,idComment:e._id,imgUserName:e.imgUserName,username:e.username,timestamp:e.timestamp,text:e.text,likes:e.likes},e._id)}))}):Object(z.jsx)(j.a,{className:"feed__posts__post__moreComments",variant:"contained",color:"primary",onClick:function(){return U(!0)},children:Object(z.jsx)(lt.a,{fontSize:"medium"})}):""]})},dt=function(){var e=Object(f.c)(Qe),t=Object(f.b)();return Object(i.useEffect)((function(){var e=k.subscribe("posts");e.bind("inserted",(function(e){t(Me())})),e.bind("updated",(function(e){t(Me())}))}),[]),Object(i.useEffect)((function(){t(Me())}),[]),Object(z.jsx)("div",{className:"feed__posts",children:e&&0!==e.length?e.map((function(e){return Object(z.jsx)(_t,{idPost:e._id,imgUser:e.imgUser,username:e.username,timestamp:e.timestamp,caption:e.caption,imgPost:e.imgPost,comments:e.comments,likes:e.likes,videoPost:e.videoPost,mood:e.mood},e._id)})):""})},mt=(s(201),function(){return Object(z.jsxs)("div",{className:"feed",children:[Object(z.jsx)(Ye,{}),Object(z.jsx)(dt,{})]})}),jt=(s(202),s(141)),bt=s.n(jt),ft=s(142),pt=s.n(ft),ht=s(143),Ot=s.n(ht),xt=s(144),gt=s.n(xt),vt=s(145),Nt=s.n(vt),yt=function(){var e=Object(f.c)(F),t=Object(i.useState)(""),s=Object(m.a)(t,2),n=s[0],a=s[1];return Object(i.useEffect)((function(){a(y(e.imgUserName))}),[]),Object(z.jsxs)("div",{className:"sidebar",children:[Object(z.jsxs)("div",{className:"sidebar__user",children:[Object(z.jsx)(ne.a,{className:"sidebar__user__avatar",alt:"H",src:n}),Object(z.jsxs)("strong",{className:"sidebar__user__text",children:[e.firstName," ",e.name]})]}),Object(z.jsxs)("div",{className:"sidebar__point sidebar__covid",children:[Object(z.jsx)(bt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(z.jsx)("strong",{className:"sidebar__user__text",children:"COVID-19 Information Center"})]}),Object(z.jsxs)("div",{className:"sidebar__point sidebar__pages",children:[Object(z.jsx)(pt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(z.jsx)("strong",{className:"sidebar__user__text",children:"Pages"})]}),Object(z.jsxs)("div",{className:"sidebar__point sidebar__friends",children:[Object(z.jsx)(Ot.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(z.jsx)("strong",{className:"sidebar__user__text",children:"Friends"})]}),Object(z.jsxs)("div",{className:"sidebar__point sidebar__messengers",children:[Object(z.jsx)(re.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(z.jsx)("strong",{className:"sidebar__user__text",children:"Messengers"})]}),Object(z.jsxs)("div",{className:"sidebar__point sidebar__marketplace",children:[Object(z.jsx)(ee.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(z.jsx)("strong",{className:"sidebar__user__text",children:"Marketplace"})]}),Object(z.jsxs)("div",{className:"sidebar__point sidebar__videos",children:[Object(z.jsx)(gt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(z.jsx)("strong",{className:"sidebar__user__text",children:"Videos"})]}),Object(z.jsxs)("div",{className:"sidebar__point sidebar__more",children:[Object(z.jsx)(Nt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(z.jsx)("strong",{className:"sidebar__user__text",children:"More"})]})]})},kt=(s(203),s(265)),St=Object(g.b)("messages/getDiscussion",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/messages/getDiscussion",{idUser1:t.idUser1,idUser2:t.idUser2}).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Ut=Object(g.b)("messages/addMessage",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/messages/addMessage",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),wt=Object(g.b)("messages/synchMessages",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/messages/synchMessages",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Ct=Object(g.c)({name:"messages",initialState:{discussions:[],statusUpDateDiscussions:!1},reducers:{cleanDiscussion:function(e,t){1===e.discussions.length?e.discussions=[]:e.discussions.splice(t.payload,1)},resetStatusUpDateDiscussions:function(e,t){e.statusUpDateDiscussions=!1}},extraReducers:(c={},Object(p.a)(c,St.fulfilled,(function(e,t){null!==t.payload&&(-1===e.discussions.findIndex((function(e){return e.messages._id===t.payload.messages._id}))&&(e.discussions.push(t.payload),e.statusUpDateDiscussions=!0))})),Object(p.a)(c,wt.fulfilled,(function(e,t){var s=e.discussions.findIndex((function(e){return e.messages._id===t.payload._id}));-1!==s&&(e.discussions[s].messages=t.payload),e.statusUpDateDiscussions=!0})),c)}),qt=Ct.actions,Bt=qt.cleanDiscussion,Pt=qt.resetStatusUpDateDiscussions,Et=function(e){return e.messages.discussions},Dt=function(e){return e.messages.statusUpDateDiscussions},It=Ct.reducer,Ft=function(){var e=Object(f.b)(),t=Object(f.c)(De),s=Object(f.c)(F);return Object(i.useEffect)((function(){null!==s&&e(Pe({myIdUser:s._id}))}),[]),Object(z.jsxs)("div",{className:"friendsBox",children:[Object(z.jsx)("p",{className:"friendsBox__title",children:"Contacts"}),0!==t.length?t.map((function(t){return Object(z.jsxs)("div",{className:"friendsBox__friend",onClick:function(){e(St({idUser1:s._id,idUser2:t._id}))},children:[Object(z.jsx)(kt.a,{src:y(t.imgUserName),alt:t.username[0].toUpperCase(),className:"friendsBox__friend__avatar"}),Object(z.jsxs)("span",{className:"friendsBox__friend__text",children:[t.name," ",t.firstName]})]},"friend-"+t._id)})):Object(z.jsx)("div",{className:"friendsBox__noFriends",children:"No friends yet"})]})},Vt=(s(204),s(205),s(270)),Wt=s(146),Mt=s.n(Wt),Rt=s(263),At=s(147),Lt=s.n(At),Tt=function(e){var t=e.friend,s=e.messages,n=e.index,a=Object(f.b)(),r=Object(f.c)(F),c=Object(i.useState)(""),o=Object(m.a)(c,2),u=o[0],l=o[1],_=Object(i.useState)(!1),d=Object(m.a)(_,2),j=d[0],b=d[1];return Object(z.jsxs)("div",{className:"messages__discussion",children:[Object(z.jsxs)("div",{className:"messages__discussion__information",onClick:function(){console.log("click "),b(!j)},children:[Object(z.jsx)(kt.a,{src:y(t.imgUserName),alt:t.name[0].toUpperCase(),className:"messages__discussion__information__avatar"}),t.firstName," ",t.name,Object(z.jsx)(Vt.a,{className:"messages__discussion__information__exit",color:"success",onClick:function(){a(Bt(n))},children:Object(z.jsx)(Mt.a,{})})]}),j?"":Object(z.jsx)("div",{className:"messages__discussion__main",children:null!==s&&0!==s.length?s.messages.map((function(e){return e.idUser===r._id?Object(z.jsx)("div",{className:"messages__discussion__main__msg messages__discussion__main__myMsg",children:e.message},"msg-"+e._id):Object(z.jsx)("div",{className:"messages__discussion__main__msg messages__discussion__main__friendMsg",children:e.message},"msg-"+e._id)})):""}),j?"":Object(z.jsx)("form",{className:"messages__discussion__form",children:Object(z.jsxs)(Rt.a,{className:"messages__discussion__form__control",children:[Object(z.jsx)("input",{className:"messages__discussion__form__control__input",placeholder:"Message",value:u,onChange:function(e){return l(e.target.value)},type:"text",autoFocus:!0}),Object(z.jsx)(Vt.a,{type:"submit",onClick:function(e){e.preventDefault();var t={idMessages:s._id,message:{message:u,timestamp:Date.now(),idUser:r._id,likes:[]}};a(Ut(t)),l("")},color:"primary",disabled:!u,className:"messages__discussion__form__control__btn",children:Object(z.jsx)(Lt.a,{})})]})})]},"discussion-"+t.id+"-"+r._id)},zt=function(){var e=Object(f.b)(),t=Object(f.c)(Et),s=Object(f.c)(Dt),n=Object(i.useState)(!1),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(f.c)(F);return Object(i.useEffect)((function(){var e=k.subscribe("messages");e.bind("inserted",(function(e){console.log("Inserted messages"),c(!0)})),e.bind("updated",(function(e){console.log("Update messages"),c(!0)}))}),[]),Object(i.useEffect)((function(){console.log(t),t.forEach((function(t,s){var n={idUser1:o._id,idUser2:t.friend.id};e(wt(n))})),c(!1)}),[r]),Object(i.useEffect)((function(){var t=document.querySelectorAll(".messages__discussion__main");null!==t&&t.forEach((function(e){e.scrollTop=e.scrollHeight})),e(Pt())}),[s]),Object(z.jsx)("div",{className:"messages",children:0!==t.length?t.map((function(e,t){return Object(z.jsx)(Tt,{friend:e.friend,messages:e.messages,index:t})})):""})},Jt=function(){var e=Object(f.c)(F),t=Object(d.g)();return Object(i.useEffect)((function(){null!==e&&0!==e.length||t.push("/login")}),[]),e?Object(z.jsxs)("div",{className:"home",children:[Object(z.jsx)(yt,{}),Object(z.jsx)(mt,{})]}):""};var Ht=function(){return Object(z.jsx)(_.a,{children:Object(z.jsx)("div",{className:"app",children:Object(z.jsxs)(d.d,{children:[Object(z.jsx)(d.b,{exact:!0,path:"/login",component:J}),Object(z.jsx)(d.b,{exact:!0,path:"/signUp",component:$}),Object(z.jsx)(d.b,{exact:!0,path:"/home",render:function(){return Object(z.jsxs)(o.a.Fragment,{children:[Object(z.jsx)(Fe,{}),Object(z.jsx)(Ft,{}),Object(z.jsx)(Jt,{}),Object(z.jsx)(zt,{})]})}}),Object(z.jsx)(d.a,{from:"/*",to:"/login",status:200})]})})})},Gt=Object(g.a)({reducer:{posts:Xe,login:M,header:ke,friendsBox:Ie,messages:It}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(z.jsx)(o.a.StrictMode,{children:Object(z.jsx)(f.a,{store:Gt,children:Object(z.jsx)(Ht,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},94:function(e,t){e.exports={calculateDifferenceTimestamps:function(e,t){var s=t-e;return(s/=1e3)<=60?"Since "+Math.round(s)+" seconds":(s/=60)<=60?"Since "+Math.round(s)+" minutes":(s/=60)<=24?"Since "+Math.round(s)+" hours":(s/=24)<=30?"Since "+Math.round(s)+" days":(s/=30)<=12?"Since "+Math.round(s)+" months":(s/=12,"Since "+Math.round(s)+" years")},generateUniqueId:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}},[[206,1,2]]]);
//# sourceMappingURL=main.cf5cea52.chunk.js.map