(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{169:function(e,t,s){},170:function(e,t,s){},195:function(e,t,s){},197:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){},200:function(e,t,s){},201:function(e,t,s){},202:function(e,t,s){},203:function(e,t,s){},204:function(e,t,s){},205:function(e,t,s){},206:function(e,t,s){},207:function(e,t,s){},208:function(e,t,s){},209:function(e,t,s){},210:function(e,t,s){"use strict";s.r(t);var n,a,r,c,i=s(0),o=s.n(i),u=s(22),l=s.n(u),_=(s(169),s(63)),d=s(25),m=s(9),b=s(260),j=(s(170),s(265)),f=s(10),p=s(7),h=s(11),O=s.n(h),g=s(19),x=s(14),v=s(122),N="https://facebook-clone-mern-hamza.herokuapp.com",y=function(e){return N+"/media/retrieve/?filename="+e},k=new(s.n(v).a)("67843c3bf2c33b4e1d28",{cluster:"eu"}),S=s(16),U=s.n(S),w=Object(x.b)("upload/user",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/upload",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),C=Object(x.b)("/retrieve/user",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/retrieve",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),q=Object(x.b)("user/synchronisation",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/synchronisation",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),P=Object(x.c)({name:"login",initialState:{user:null,err:null,statusLogin:null},reducers:{resetError:function(e){e.err=null},retrieveLocalUser:function(e){var t=localStorage.getItem("user");console.log(t),t?(console.log("user found"),e.user=JSON.parse(t)):console.log("user not found")},logOut:function(e){e.user=null,localStorage.removeItem("user")}},extraReducers:(n={},Object(p.a)(n,w.fulfilled,(function(e,t){e.user=t.payload})),Object(p.a)(n,C.fulfilled,(function(e,t){e.statusLogin=null,localStorage.setItem("user",JSON.stringify(t.payload)),e.user=t.payload})),Object(p.a)(n,C.rejected,(function(e,t){e.statusLogin=null;var s=t.payload.error.split(" "),n=s[s.length-1];e.err=parseInt(n)})),Object(p.a)(n,C.pending,(function(e){e.statusLogin="wait"})),Object(p.a)(n,q.fulfilled,(function(e,t){localStorage.setItem("user",JSON.stringify(t.payload)),e.user=t.payload})),n)}),E=P.actions,B=E.resetError,I=E.retrieveLocalUser,D=E.logOut,F=function(e){return e.login.user},V=function(e){return e.login.err},W=function(e){return e.login.statusLogin},M=P.reducer,R=s(267),A=s(272),L=s(253),z=s(261),T=s(1),J=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(""),r=Object(m.a)(a,2),c=r[0],o=r[1],u=Object(i.useState)(""),l=Object(m.a)(u,2),_=l[0],p=l[1],h=Object(d.g)(),O=Object(f.b)(),g=Object(f.c)(F),x=Object(f.c)(V),v=Object(f.c)(W);Object(i.useEffect)((function(){document.querySelector(".login__form__error").style.display="none"}),[]),Object(i.useEffect)((function(){null!==g?(O(q({idUser:g._id})),h.push("/home")):O(I())}),[g]),Object(i.useEffect)((function(){if(null!==x){switch(document.querySelector(".login__form__error").style.display="flex",x){case 500:p("Internal Server Error");break;case 404:p("Username not found");break;default:p("Incorrect password")}setTimeout((function(){document.querySelector(".login__form__error").style.display="none",p(""),O(B())}),5e3)}}),[x]),Object(i.useEffect)((function(){null!==v?document.querySelector(".login__form__wait").style.display="flex":(document.querySelector(".login__form__wait").style.display="none",n(""),o(""))}),[v]);return Object(T.jsxs)("div",{className:"login",children:[Object(T.jsx)("img",{src:"fb_img.png",alt:"",className:"login__img"}),Object(T.jsx)("form",{className:"login__form",children:Object(T.jsxs)(L.a,{className:"login__form__formControl",children:[Object(T.jsx)(j.a,{label:"Username",variant:"outlined",className:"login__form__username login__form__input",value:s,onChange:function(e){return n(e.target.value)},disabled:null!==v}),Object(T.jsx)(j.a,{label:"Password",variant:"outlined",type:"Password",className:"login__form__password login__form__input",value:c,onChange:function(e){return o(e.target.value)},disabled:null!==v}),Object(T.jsxs)(R.a,{severity:"error",className:"login__form__error",children:[Object(T.jsx)(A.a,{children:"Error"}),_]}),Object(T.jsx)(b.a,{variant:"contained",color:"primary",className:"login__form__btn",onClick:function(e){if(e.preventDefault(),console.log("click login"),s&&c){var t={username:s.toLocaleLowerCase(),password:c};O(C(t))}},disabled:!s||!c||null!==v,type:"submit",children:"Login"}),Object(T.jsx)(z.a,{className:"login__form__wait",style:{display:"none"}})]})}),Object(T.jsx)(b.a,{className:"login__signUp",onClick:function(){h.push("/signUp")},children:"Sign Up"})]})},H=(s(195),s(89)),G=s.n(H),$=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(""),r=Object(m.a)(a,2),c=r[0],o=r[1],u=Object(i.useState)(""),l=Object(m.a)(u,2),_=l[0],p=l[1],h=Object(i.useState)(""),O=Object(m.a)(h,2),g=O[0],x=O[1],v=Object(i.useState)(void 0),y=Object(m.a)(v,2),k=y[0],S=y[1],C=Object(i.useState)(""),q=Object(m.a)(C,2),P=q[0],E=q[1],B=Object(i.useState)(""),I=Object(m.a)(B,2),D=I[0],V=I[1],W=Object(i.useState)(""),M=Object(m.a)(W,2),R=M[0],A=M[1],L=Object(d.g)(),z=Object(f.b)(),J=Object(f.c)(F);Object(i.useEffect)((function(){null!==J&&L.push("/home")}),[J]);return Object(T.jsxs)("div",{className:"signUp",children:[Object(T.jsx)("img",{src:"fb_img.png",alt:"",className:"signUp__img"}),Object(T.jsxs)("form",{className:"signUp__form",children:[Object(T.jsx)(j.a,{label:"Name",variant:"outlined",className:"signUp__form__name signUp__form__input",value:s,onChange:function(e){return n(e.target.value)}}),Object(T.jsx)(j.a,{label:"First Name",variant:"outlined",className:"signUp__form__firstName signUp__form__input",value:c,onChange:function(e){return o(e.target.value)}}),Object(T.jsx)(j.a,{label:"Email",variant:"outlined",className:"signUp__form__email signUp__form__input",value:_,onChange:function(e){return p(e.target.value)}}),Object(T.jsx)(j.a,{label:"Phone Number",variant:"outlined",className:"signUp__form__phone signUp__form__input",value:g,onChange:function(e){return x(e.target.value)}}),Object(T.jsxs)("label",{className:"signUp__form__label signUp__form__input",htmlFor:"video",children:[Object(T.jsxs)(b.a,{variant:"contained",color:"primary",component:"span",children:[Object(T.jsx)(G.a,{className:"signUp__form__label__icon"}),"Upload Photo"]}),Object(T.jsx)("input",{id:"video",style:{display:"none"},type:"file",onChange:function(e){e.target.files[0]&&S(e.target.files[0])}})]}),Object(T.jsx)(j.a,{label:"Username",variant:"outlined",className:"signUp__form__username signUp__form__input",value:P,onChange:function(e){return E(e.target.value)}}),Object(T.jsx)(j.a,{label:"Password",variant:"outlined",className:"signUp__form__password signUp__form__input",type:"Password",value:D,onChange:function(e){return V(e.target.value)}}),Object(T.jsx)(j.a,{label:"Confirm Password",variant:"outlined",className:"signUp__form__passwordConfirm signUp__form__input",type:"Password",value:R,onChange:function(e){return A(e.target.value)}}),Object(T.jsx)(b.a,{variant:"contained",color:"primary",className:"signUp__form__btn",onClick:function(e){if(e.preventDefault(),s&&c&&P&&D&&R)if(D===R){if(k){var t=new FormData;t.append("file",k),U.a.post(N+"/media/upload",t).then((function(e){var t={name:s.toUpperCase(),firstName:c,email:_||"",phone:g||"",imgUserName:e.data?e.data:"",username:P.toLowerCase(),password:D};console.log(t),z(w(t)),n(""),o(""),p(""),x(""),E(""),V(""),A("")}))}}else alert("Password is not the same !");else alert("Something wrong !")},disabled:!(s&&c&&P&&D&&R),children:"Sign Up"})]}),Object(T.jsx)(b.a,{className:"signUp__login",onClick:function(){L.push("/login")},children:"Login"})]})},K=(s(197),s(198),s(131)),Q=s.n(K),X=s(132),Y=s.n(X),Z=s(92),ee=s.n(Z),te=s(128),se=s.n(te),ne=s(273),ae=s(93),re=s.n(ae),ce=s(133),ie=s.n(ce),oe=s(134),ue=s.n(oe),le=s(136),_e=s.n(le),de=s(135),me=s.n(de),be=s(259),je=Object(x.b)("user/search",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/search",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),fe=Object(x.b)("user/invite",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/invite",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),pe=Object(x.b)("user/disinvite",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/disinvite",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),he=Object(x.b)("user/get",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get(N+"/user/get/?idUser="+t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Oe=Object(x.b)("user/getRequesters",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/requesters",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),ge=Object(x.b)("user/refuseFriend",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/refuseFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),xe=Object(x.c)({name:"header",initialState:{search:{friends:[],statusSearch:!1},notification:{requesters:[]}},reducers:{},extraReducers:(a={},Object(p.a)(a,je.pending,(function(e,t){e.search.statusSearch=!0,e.search.friends=[]})),Object(p.a)(a,je.fulfilled,(function(e,t){e.search.statusSearch=!1,e.search.friends=t.payload})),Object(p.a)(a,fe.fulfilled,(function(e,t){})),Object(p.a)(a,pe.fulfilled,(function(e,t){})),Object(p.a)(a,he.fulfilled,(function(e,t){e.notification.requesters.push(t.payload)})),Object(p.a)(a,Oe.fulfilled,(function(e,t){e.notification.requesters=[],e.notification.requesters=t.payload})),a)}),ve=function(e){return e.header.search.friends},Ne=function(e){return e.header.search.statusSearch},ye=function(e){return e.header.notification.requesters},ke=xe.reducer,Se=s(275),Ue=s(130),we=s.n(Ue),Ce=s(274),qe=Object(x.b)("user/addFriend",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/addFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Pe=Object(x.b)("user/removeFriend",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/removeFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Ee=Object(x.b)("user/getFriends",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/user/getFriends",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Be=Object(x.c)({name:"friendsBox",initialState:{friends:[]},reducers:{},extraReducers:Object(p.a)({},Ee.fulfilled,(function(e,t){e.friends=t.payload}))}),Ie=function(e){return e.friendsBox.friends},De=Be.reducer,Fe=function(){var e=Object(f.c)(F),t=Object(f.b)(),s=Object(d.g)(),n=Object(i.useState)(!1),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(i.useState)(""),u=Object(m.a)(o,2),l=u[0],_=u[1],b=Object(i.useState)(!1),j=Object(m.a)(b,2),p=j[0],h=j[1],O=Object(i.useState)(!1),g=Object(m.a)(O,2),x=g[0],v=g[1],N=Object(f.c)(ve),S=Object(f.c)(Ne),U=Object(f.c)(ye);Object(i.useEffect)((function(){var e=document.querySelector(".home"),t=document.querySelector(".friendsBox"),s=document.querySelector(".messages");null!==e&&(p?(e.style.filter="brightness(80%)",t.style.filter="brightness(80%)",s.style.filter="brightness(80%)"):(e.style.filter="brightness(100%)",t.style.filter="brightness(100%)",s.style.filter="brightness(100%)"))}),[p]),Object(i.useEffect)((function(){""!==l&&t(je({search:l,idUser:e._id}))}),[l]);document.onclick=function(e){var t=document.querySelector(".header__search__barSearch__input");if(t===document.activeElement&&h(!0),p&&!t.contains(e.target)){var s=document.querySelector(".header__searchBox");null!==s&&s.contains(e.target)||h(!1)}if(r){var n=document.querySelector(".header__account__btnPlus");if(null!==n)if(!n.contains(e.target))document.querySelector(".header__plus").contains(e.target)||(c(!1),document.querySelector(".header__account__btnPlus__icon").style.color="#6E6F70")}if(x){var a=document.querySelector(".header__account__btnNotification");if(null!==a)if(!a.contains(e.target))document.querySelector(".header__notification").contains(e.target)||(v(!1),document.querySelector(".header__account__btnNotification__icon").style.color="#6E6F70")}};return Object(i.useEffect)((function(){null!==e&&0!==e.length||s.push("/login"),null!==e&&t(Oe({myIdUser:e._id}));var n=k.subscribe("users");n.bind("inserted",(function(s){console.log("inserted user Client"),null!==e&&t(je({search:l,idUser:e._id}))})),n.bind("updated",(function(s){console.log("updated user Client"),null!==e&&(t(q({idUser:e._id})),t(je({search:l,idUser:e._id})),t(Oe({myIdUser:e._id})),t(Ee({myIdUser:e._id})))}))}),[]),Object(T.jsxs)("div",{className:"header",children:[Object(T.jsxs)("div",{className:"header__search",children:[Object(T.jsx)("img",{className:"header__search__img",src:"icons/facebook_icon.png",alt:""}),Object(T.jsxs)("div",{className:"header__search__barSearch",children:[Object(T.jsx)(se.a,{className:"header__search__barSearch__icon",fontSize:"medium",color:"action"}),Object(T.jsx)("input",{className:"header__search__barSearch__input",placeholder:"Search Friends",type:"text",value:l,onChange:function(e){return _(e.target.value)}})]})]}),p&&0!==l.length?Object(T.jsx)("div",{className:"header__searchBox",children:S?Object(T.jsx)(Se.a,{color:"secondary"}):0!==N.length?N.map((function(s){return Object(T.jsxs)("div",{className:"header__searchBox__friend",children:[Object(T.jsxs)("div",{className:"header__searchBox__friend__information",children:[Object(T.jsx)(ne.a,{src:y(s.imgUserName),alt:s.username.toUpperCase(),className:"header__searchBox__friend__information__avatar"}),Object(T.jsxs)("span",{children:[s.firstName," ",s.name]})]}),e.idFriends.includes(String(s._id))?Object(T.jsx)(Ce.a,{variant:"text",className:"header__searchBox__friend__btn",size:"small",onClick:function(){t(Pe({idUser:e._id,idFriend:s._id}))},children:"Remove as friend"}):e.idRequests.includes(String(s._id))?Object(T.jsxs)("div",{className:"header__notification__requester__btn",children:[Object(T.jsx)(Ce.a,{onClick:function(){t(qe({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnAccept",size:"small",variant:"text",children:"Accept"}),Object(T.jsx)(Ce.a,{onClick:function(){t(ge({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnRefuse",size:"small",color:"secondary",variant:"text",children:"Refuse"})]}):s.idRequests.includes(String(e._id))?Object(T.jsx)(Ce.a,{variant:"outlined",className:"header__searchBox__friend__btn",size:"small",onClick:function(){t(pe({idUser:e._id,idRequest:s._id}))},children:"Disinvite"}):Object(T.jsx)(Ce.a,{variant:"contained",size:"small",className:"header__searchBox__friend__btn",onClick:function(){t(fe({idUser:e._id,idRequest:s._id}))},children:"Invite"})]},s._id)})):Object(T.jsxs)("div",{className:"header__searchBox__noresult",children:[Object(T.jsx)(we.a,{className:"header__searchBox__noresult__icon"}),Object(T.jsx)("p",{className:"header__searchBox__noresult__text",children:"No Result"})]})}):"",Object(T.jsxs)("div",{className:"header__nav",children:[Object(T.jsxs)("div",{className:"header__nav__btn header__nav__home selected",children:[Object(T.jsx)(Q.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"}),Object(T.jsx)("span",{})]}),Object(T.jsx)("div",{className:"header__nav__btn header__nav__video",children:Object(T.jsx)(Y.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"})}),Object(T.jsx)("div",{className:"header__nav__btn header__nav__marketplace",children:Object(T.jsx)(ee.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"})})]}),Object(T.jsxs)("div",{className:"header__account",children:[Object(T.jsxs)("div",{className:"header__account__user",children:[Object(T.jsx)(ne.a,{className:"header__account__user__avatar",alt:"",src:y(e?e.imgUserName:"")}),Object(T.jsxs)("strong",{className:"header__account__user__text",children:[e?e.firstName:""," ",e?e.name:""]})]}),Object(T.jsx)(be.a,{className:"header__account__btn header__account__btnChat",children:Object(T.jsx)(re.a,{className:"header__account__btn__icon",fontSize:"small",color:"action"})}),Object(T.jsx)(be.a,{className:"header__account__btn header__account__btnNotification",onClick:function(){x?(v(!1),document.querySelector(".header__account__btnNotification__icon").style.color="#6E6F70"):(v(!0),document.querySelector(".header__account__btnNotification__icon").style.color="blue")},children:Object(T.jsx)(ie.a,{className:"header__account__btn__icon header__account__btnNotification__icon",fontSize:"small",color:"action"})}),Object(T.jsx)(be.a,{className:"header__account__btn header__account__btnPlus",onClick:function(e){r?(c(!1),document.querySelector(".header__account__btnPlus__icon").style.color="#6E6F70"):(c(!0),document.querySelector(".header__account__btnPlus__icon").style.color="blue")},children:Object(T.jsx)(ue.a,{className:"header__account__btn__icon header__account__btnPlus__icon",fontSize:"small",color:"action"})})]}),r?Object(T.jsxs)("div",{className:"header__plus",children:[Object(T.jsxs)("div",{className:"header__plus__btn header__plus__profile",children:[Object(T.jsx)(ne.a,{className:"header__plus__profile__avatar",alt:e.username[0].toUpperCase(),src:y(e.imgUserName)}),Object(T.jsxs)("div",{className:"header__plus__profile__text",children:[Object(T.jsxs)("strong",{children:[e.firstName," ",e.name]}),Object(T.jsx)("p",{className:"header__plus__profile__text__placeholder",children:"Go to the profile"})]})]}),Object(T.jsxs)("div",{className:"header__plus__btn header__plus__settings",children:[Object(T.jsx)(me.a,{className:"header__plus__btn__icon"})," Setting"]}),Object(T.jsxs)("div",{className:"header__plus__btn header__plus__logout",onClick:function(){t(D()),s.push("/login")},children:[Object(T.jsx)(_e.a,{className:"header__plus__btn__icon"}),"Log Out"]})]}):"",x?Object(T.jsx)("div",{className:"header__notification",children:0!==U.length?U.map((function(s){return Object(T.jsxs)("div",{className:"header__notification__requester",children:[Object(T.jsxs)("div",{className:"header__notification__requester__information",children:[Object(T.jsx)(ne.a,{className:"header__notification__requester__information__avatar",src:y(s.imgUserName),alt:s.username[0].toUpperCase()}),s.firstName," ",s.name]}),Object(T.jsxs)("div",{className:"header__notification__requester__btn",children:[Object(T.jsx)(Ce.a,{onClick:function(){t(qe({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnAccept",size:"small",variant:"text",children:"Accept"}),Object(T.jsx)(Ce.a,{onClick:function(){t(ge({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnRefuse",size:"small",color:"secondary",variant:"text",children:"Refuse"})]})]},"request-"+s._id)})):Object(T.jsx)("div",{className:"header__notification__noresult",children:"No one invited you !"})}):""]})},Ve=(s(199),s(137)),We=s.n(Ve),Me=Object(x.b)("post/getPosts",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/getPosts",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Re=Object(x.b)("posts/upload",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/upload",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Ae=Object(x.b)("posts/comment/upload",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/comment/upload",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Le=Object(x.b)("post/like",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/like",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),ze=Object(x.b)("post/dislike",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/dislike",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Te=Object(x.b)("post/comment/like",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/comment/like",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Je=Object(x.b)("post/comment/dislike",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/post/comment/dislike",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),He=Object(x.c)({name:"posts",initialState:{posts:[],statusLikePost:!1,statusLikeComment:!1},reducers:{setLikePostById:{reducer:function(e,t){var s=t.payload.idPost,n=t.payload.username,a=e.posts.findIndex((function(e){return e._id===s}));-1!==a&&(e.posts[a].likes.includes(n)?e.posts[a].likes.splice(e.posts[a].likes.indexOf(n),1):e.posts[a].likes.push(n))},prepare:function(e,t){return{payload:{idPost:e,username:t}}}},setLikeCommentById:{reducer:function(e,t){var s=e.posts.findIndex((function(e){return e._id===t.payload.idPost}));if(-1!==s){var n=e.posts[s].comments.findIndex((function(e){return e._id===t.payload.idComment}));-1!==n&&(e.posts[s].comments[n].likes.includes(t.payload.username)?e.posts[s].comments[n].likes.splice(e.posts[s].comments[n].likes.indexOf(t.payload.username),1):e.posts[s].comments[n].likes.push(t.payload.username))}},prepare:function(e,t,s){return{payload:{idPost:e,idComment:t,username:s}}}}},extraReducers:(r={},Object(p.a)(r,Me.fulfilled,(function(e,t){e.posts=t.payload})),Object(p.a)(r,Re.fulfilled,(function(e,t){console.log("Post upload successfully !")})),Object(p.a)(r,Ae.fulfilled,(function(e,t){console.log("Comment upload successfully !")})),Object(p.a)(r,Le.fulfilled,(function(e,t){})),Object(p.a)(r,Le.pending,(function(e,t){})),Object(p.a)(r,ze.fulfilled,(function(e,t){})),Object(p.a)(r,ze.pending,(function(e,t){})),Object(p.a)(r,Te.fulfilled,(function(e,t){})),Object(p.a)(r,Je.fulfilled,(function(e,t){})),r)}),Ge=He.actions,$e=Ge.setLikeCommentById,Ke=Ge.setLikePostById,Qe=function(e){return e.posts.posts},Xe=He.reducer,Ye=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(void 0),r=Object(m.a)(a,2),c=(r[0],r[1]),o=Object(i.useState)(void 0),u=Object(m.a)(o,2),l=u[0],_=u[1],d=Object(i.useState)(void 0),b=Object(m.a)(d,2),j=(b[0],b[1]),p=Object(f.c)(F),h=Object(i.useState)(""),O=Object(m.a)(h,2),g=O[0],x=O[1],v=Object(f.b)();return Object(i.useEffect)((function(){x(y(p.imgUserName))}),[]),Object(T.jsx)("form",{className:"feed__upload",children:Object(T.jsxs)(L.a,{style:{width:"98%"},children:[Object(T.jsxs)("div",{className:"feed__upload__caption",children:[Object(T.jsx)(ne.a,{className:"feed__upload__caption__avatar",alt:"H",src:g}),Object(T.jsx)("input",{type:"text",placeholder:"Caption",className:"feed__upload__caption__input",value:s,onChange:function(e){return n(e.target.value)}})]}),Object(T.jsxs)("div",{className:"feed__upload__multi",children:[Object(T.jsxs)("label",{className:"feed__upload__multi__label feed__upload__multi__image",htmlFor:"media",children:[Object(T.jsx)(G.a,{className:"feed__upload__multi__label__icon",color:"error"}),"Image / Video",Object(T.jsx)("input",{id:"media",style:{display:"none"},type:"file",onChange:function(e){e.target.files[0]&&_(e.target.files[0])}})]}),Object(T.jsxs)("label",{className:"feed__upload__multi__label feed__upload__multi__mood",htmlFor:"mood",children:[Object(T.jsx)(We.a,{className:"feed__upload__multi__label__icon",color:"error"}),"Mood"]})]}),Object(T.jsx)("button",{type:"submit",className:"feed__upload__btn",style:{display:"none"},onClick:function(e){if(e.preventDefault(),s){var t={idUser:p._id,username:p.username,imgUserName:p.imgUserName,caption:s,timestamp:Date.now(),likes:[],comments:[],mood:""};if(l){var a=new FormData;a.append("file",l),U.a.post(N+"/media/upload",a).then((function(e){t.imgPost=e.data,v(Re(t))}))}n(""),_(void 0),c(void 0),j(void 0)}},children:"Upload"})]})})},Ze=(s(200),s(201),s(95)),et=s.n(Ze),tt=s(139),st=s.n(tt),nt=(s(202),s(94)),at=function(e){var t=e.idPost,s=e.idComment,n=(e.imgUserName,e.username),a=e.timestamp,r=e.text,c=e.likes,o=Object(f.b)(),u=Object(f.c)(F),l=Object(i.useState)(0),_=Object(m.a)(l,2),d=_[0],b=_[1],j=Object(i.useState)(0),p=Object(m.a)(j,2),h=p[0],O=p[1];Object(i.useEffect)((function(){c.includes(u.username)?document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="blue":document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="gray"}),[]);return Object(T.jsxs)("div",{className:"comment",id:s,children:[Object(T.jsx)(ne.a,{className:"comment__avatar",alt:u.username[0].toUpperCase(),src:y(u.imgUserName)}),Object(T.jsxs)("div",{className:"comment__userAndTextAndStates",children:[Object(T.jsx)("strong",{className:"comment__userAndTextAndStates__user",children:n}),Object(T.jsx)("p",{className:"comment__userAndTextAndStates__text",children:r}),Object(T.jsxs)("div",{className:"comment__userAndTextAndStates__states",children:[Object(T.jsxs)("div",{className:"comment__userAndTextAndStates__states__likes",onClick:function(){clearTimeout(d),console.log(s),c.includes(u.username)?(document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="gray",1===h?O(0):(O(1),b(setTimeout((function(){o(Je({idPost:t,idComment:s,username:u.username})),O(0)}),3e3)))):(document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="blue",1===h?O(0):(O(1),b(setTimeout((function(){o(Te({idPost:t,idComment:s,username:u.username})),O(0)}),3e3)))),o($e(t,s,u.username))},children:[Object(T.jsx)(et.a,{className:"comment__userAndTextAndStates__states__likes__icon",fontSize:"small",id:"comment_likes_".concat(t,"_").concat(s)}),c.length]}),Object(T.jsx)("div",{className:"comment__userAndTextAndStates__states__timestamp",children:Object(nt.calculateDifferenceTimestamps)(a,Date.now())})]})]})]})},rt=(s(203),s(257)),ct=function(e){var t=e.idPost,s=Object(f.c)(F),n=Object(i.useState)(""),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(f.b)();return Object(T.jsx)("form",{className:"feed__posts__post__uploadComment",children:Object(T.jsxs)(L.a,{className:"feed__posts__post__uploadComment__formControl",children:[Object(T.jsx)(ne.a,{className:"feed__posts__post__uploadComment__avatar",alt:s.username[0].toUpperCase(),src:y(s.imgUserName)}),Object(T.jsx)(rt.a,{className:"feed__posts__post__uploadComment__input",placeholder:"Comment",value:r,onChange:function(e){return c(e.target.value)}}),Object(T.jsx)("button",{className:"feed__posts__post__uploadComment__btn",style:{display:"none"},onClick:function(e){e.preventDefault();var n={idPost:t,comment:{username:s.username,imgUserName:s.imgUserName,text:r,timestamp:Date.now(),likes:[]}};o(Ae(n)),c("")}})]})})},it=s(138),ot=s.n(it),ut=s(140),lt=s.n(ut),_t=function(e){var t=e.idPost,s=e.imgUser,n=e.username,a=e.timestamp,r=e.caption,c=e.imgPost,o=e.likes,u=e.comments,l=Object(f.b)(),_=Object(f.c)(F),d=Object(i.useState)(0),j=Object(m.a)(d,2),p=j[0],h=j[1],O=Object(i.useState)(0),g=Object(m.a)(O,2),x=g[0],v=g[1],N=Object(i.useState)(!0),k=Object(m.a)(N,2),S=k[0],U=k[1];Object(i.useEffect)((function(){o.includes(_.username)?document.getElementById("post_likes_".concat(t)).style.color="blue":document.getElementById("post_likes_".concat(t)).style.color="gray"}),[]);return Object(T.jsxs)("div",{className:"feed__posts__post",id:"feed__posts__post__"+t,children:[Object(T.jsxs)("div",{className:"feed__posts__post__head",children:[Object(T.jsx)(ne.a,{className:"feed__posts__post__head__avatar",alt:n[0],src:y(s)}),Object(T.jsxs)("div",{className:"feed__posts__post__head__user",children:[Object(T.jsx)("strong",{className:"feed__posts__post__head__user__username",children:n}),Object(T.jsx)("span",{className:"feed__posts__post__head__user__timestamp",children:Object(nt.calculateDifferenceTimestamps)(a,Date.now())})]})]}),Object(T.jsx)("div",{className:"feed__posts__post__caption",children:r}),null!==c?[".jpg",".jpeg",".png"].includes(ot.a.extname(c))?Object(T.jsx)("img",{src:y(c),alt:"",className:"feed__posts__post__media"}):Object(T.jsx)("video",{controls:!0,className:"feed__posts__post__media",children:Object(T.jsx)("source",{src:y(c)})}):"",Object(T.jsxs)("div",{className:"feed__posts__post__states",children:[Object(T.jsxs)(be.a,{className:"feed__posts__post__states__likes",onClick:function(){clearTimeout(p),o.includes(_.username)?(document.getElementById("post_likes_".concat(t)).style.color="gray",1===x?v(0):(v(1),h(setTimeout((function(){l(ze({idPost:t,username:_.username})),v(0)}),3e3)))):(document.getElementById("post_likes_".concat(t)).style.color="blue",1===x?v(0):(v(1),h(setTimeout((function(){l(Le({idPost:t,username:_.username})),v(0)}),3e3)))),l(Ke(t,_.username))},children:[Object(T.jsx)(et.a,{className:"feed__posts__post__states__likes__icon",id:"post_likes_".concat(t)}),o.length]}),Object(T.jsxs)(be.a,{className:"feed__posts__post__states__comments",onClick:function(e){U(!S)},children:[Object(T.jsx)(st.a,{className:"feed__posts__post__states__comments__icon",style:{color:"red"}}),Object(T.jsx)("span",{children:u.length})]})]}),Object(T.jsx)(ct,{idPost:t}),0!==u.length?S?Object(T.jsx)("div",{className:"feed__posts__post__comments",children:u.map((function(e){return Object(T.jsx)(at,{idPost:t,idComment:e._id,imgUserName:e.imgUserName,username:e.username,timestamp:e.timestamp,text:e.text,likes:e.likes},e._id)}))}):Object(T.jsx)(b.a,{className:"feed__posts__post__moreComments",variant:"contained",color:"primary",onClick:function(){return U(!0)},children:Object(T.jsx)(lt.a,{fontSize:"medium"})}):""]})},dt=function(){var e=Object(f.c)(Qe),t=Object(f.c)(F),s=Object(f.b)();return Object(i.useEffect)((function(){var e=k.subscribe("posts");e.bind("inserted",(function(e){s(Me({idUser:t._id,friends:t.idFriends}))})),e.bind("updated",(function(e){s(Me({idUser:t._id,friends:t.idFriends}))}))}),[]),Object(i.useEffect)((function(){s(Me({idUser:t._id,friends:t.idFriends}))}),[]),Object(T.jsx)("div",{className:"feed__posts",children:e&&0!==e.length?e.map((function(e){return Object(T.jsx)(_t,{idPost:e._id,imgUser:e.imgUserName,username:e.username,timestamp:e.timestamp,caption:e.caption,imgPost:e.imgPost,comments:e.comments,likes:e.likes,videoPost:e.videoPost,mood:e.mood},e._id)})):""})},mt=(s(204),function(){return Object(T.jsxs)("div",{className:"feed",children:[Object(T.jsx)(Ye,{}),Object(T.jsx)(dt,{})]})}),bt=(s(205),s(141)),jt=s.n(bt),ft=s(142),pt=s.n(ft),ht=s(143),Ot=s.n(ht),gt=s(144),xt=s.n(gt),vt=s(145),Nt=s.n(vt),yt=function(){var e=Object(f.c)(F),t=Object(i.useState)(""),s=Object(m.a)(t,2),n=s[0],a=s[1];return Object(i.useEffect)((function(){a(y(e.imgUserName))}),[]),Object(T.jsxs)("div",{className:"sidebar",children:[Object(T.jsxs)("div",{className:"sidebar__user",children:[Object(T.jsx)(ne.a,{className:"sidebar__user__avatar",alt:"H",src:n}),Object(T.jsxs)("strong",{className:"sidebar__user__text",children:[e.firstName," ",e.name]})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__covid",children:[Object(T.jsx)(jt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"COVID-19 Information Center"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__pages",children:[Object(T.jsx)(pt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Pages"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__friends",children:[Object(T.jsx)(Ot.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Friends"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__messengers",children:[Object(T.jsx)(re.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Messengers"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__marketplace",children:[Object(T.jsx)(ee.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Marketplace"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__videos",children:[Object(T.jsx)(xt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Videos"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__more",children:[Object(T.jsx)(Nt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"More"})]})]})},kt=(s(206),s(207),Object(x.b)("messages/getDiscussion",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/messages/getDiscussion",{idUser1:t.idUser1,idUser2:t.idUser2}).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}())),St=Object(x.b)("messages/addMessage",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/messages/addMessage",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Ut=Object(x.b)("messages/synchMessages",function(){var e=Object(g.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/messages/synchMessages",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),wt=Object(x.b)("messages/resetSaw",function(){var e=Object(g.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post(N+"/messages/resetSaw",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Ct=Object(x.c)({name:"messages",initialState:{discussions:[],statusUpDateDiscussions:!1},reducers:{cleanDiscussion:function(e,t){1===e.discussions.length?e.discussions=[]:e.discussions.splice(t.payload,1)},resetStatusUpDateDiscussions:function(e,t){e.statusUpDateDiscussions=!1}},extraReducers:(c={},Object(p.a)(c,kt.fulfilled,(function(e,t){null!==t.payload&&(-1===e.discussions.findIndex((function(e){return e.messages._id===t.payload.messages._id}))&&(e.discussions.push(t.payload),e.statusUpDateDiscussions=!0))})),Object(p.a)(c,Ut.fulfilled,(function(e,t){var s=e.discussions.findIndex((function(e){return e.messages._id===t.payload._id}));-1!==s&&(e.discussions[s].messages=t.payload),e.statusUpDateDiscussions=!0})),c)}),qt=Ct.actions,Pt=qt.cleanDiscussion,Et=qt.resetStatusUpDateDiscussions,Bt=function(e){return e.messages.discussions},It=function(e){return e.messages.statusUpDateDiscussions},Dt=Ct.reducer,Ft=s(271),Vt=function(e){var t=e.friend,s=e.idUser,n=Object(f.b)();return Object(T.jsxs)("div",{className:"friend",onClick:function(){n(kt({idUser1:s,idUser2:t._id}))},children:[Object(T.jsx)(Ft.a,{src:y(t.imgUserName),alt:t.username[0].toUpperCase(),className:"friend__avatar"}),Object(T.jsxs)("span",{className:"friend__text",children:[t.name," ",t.firstName]})]})},Wt=function(){var e=Object(f.b)(),t=Object(f.c)(Ie),s=Object(f.c)(F);return Object(i.useEffect)((function(){null!==s&&e(Ee({myIdUser:s._id}))}),[]),Object(T.jsxs)("div",{className:"friendsBox",children:[Object(T.jsx)("p",{className:"friendsBox__title",children:"Contacts"}),0!==t.length?t.map((function(e){return Object(T.jsx)(Vt,{friend:e,idUser:s._id},e._id)})):Object(T.jsx)("div",{className:"friendsBox__noFriends",children:"No friends yet"})]})},Mt=(s(208),s(209),s(276)),Rt=s(147),At=s.n(Rt),Lt=s(269),zt=s(148),Tt=s.n(zt),Jt=s(266),Ht=s(146),Gt=s.n(Ht),$t=function(e){var t,s=e.friend,n=e.messages,a=e.index,r=Object(f.b)(),c=Object(f.c)(F),o=Object(f.c)((t=s.id,function(e){var s=e.messages.discussions.findIndex((function(e){if(e.friend.id===t)return!0}));if(-1!==s)return e.messages.discussions[s].messages.users[0].saw})),u=Object(i.useState)(""),l=Object(m.a)(u,2),_=l[0],d=l[1],b=Object(i.useState)(!1),j=Object(m.a)(b,2),p=j[0],h=j[1];return Object(i.useEffect)((function(){0!==o&&(p||r(wt({idMessages:n._id,idUser:c._id})))}),[p]),Object(T.jsxs)("div",{className:"messages__discussion",children:[Object(T.jsxs)("div",{className:"messages__discussion__information",onClick:function(){h(!p)},children:[Object(T.jsx)(Ft.a,{src:y(s.imgUserName),alt:s.name[0].toUpperCase(),className:"messages__discussion__information__avatar"}),s.firstName," ",s.name,0!==o?Object(T.jsx)(Jt.a,{badgeContent:o,color:"success",className:"messages__discussion__information__avatar__noneSaw",anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(T.jsx)(Gt.a,{color:"action"})}):"",Object(T.jsx)(Mt.a,{className:"messages__discussion__information__exit",color:"success",onClick:function(){r(Pt(a))},children:Object(T.jsx)(At.a,{})})]}),p?"":Object(T.jsx)("div",{className:"messages__discussion__main",children:null!==n&&0!==n.length?n.messages.map((function(e){return e.idUser===c._id?Object(T.jsx)("div",{className:"messages__discussion__main__msg messages__discussion__main__myMsg",children:e.message},"msg-"+e._id):Object(T.jsx)("div",{className:"messages__discussion__main__msg messages__discussion__main__friendMsg",children:e.message},"msg-"+e._id)})):""}),p?"":Object(T.jsx)("form",{className:"messages__discussion__form",children:Object(T.jsxs)(Lt.a,{className:"messages__discussion__form__control",children:[Object(T.jsx)("input",{className:"messages__discussion__form__control__input",placeholder:"Message",value:_,onChange:function(e){return d(e.target.value)},type:"text",autoFocus:!0}),Object(T.jsx)(Mt.a,{type:"submit",onClick:function(e){e.preventDefault();var t={idMessages:n._id,message:{message:_,timestamp:Date.now(),idUser:c._id,likes:[]}};r(St(t)),d("")},color:"primary",disabled:!_,className:"messages__discussion__form__control__btn",children:Object(T.jsx)(Tt.a,{})})]})})]},"discussion-"+s.id+"-"+c._id)},Kt=function(){var e=Object(f.b)(),t=Object(f.c)(Bt),s=Object(f.c)(It),n=Object(i.useState)(!1),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(f.c)(F);return Object(i.useEffect)((function(){var e=k.subscribe("messages");e.bind("inserted",(function(e){console.log("Inserted messages"),c(!0)})),e.bind("updated",(function(e){console.log("Update messages"),c(!0)}))}),[]),Object(i.useEffect)((function(){t.forEach((function(t,s){var n={idUser1:o._id,idUser2:t.friend.id};e(Ut(n))})),c(!1)}),[r]),Object(i.useEffect)((function(){var t=document.querySelectorAll(".messages__discussion__main");null!==t&&t.forEach((function(e){e.scrollTop=e.scrollHeight})),e(Et())}),[s]),Object(T.jsx)("div",{className:"messages",children:0!==t.length?t.map((function(e,t){return Object(T.jsx)($t,{friend:e.friend,messages:e.messages,index:t})})):""})},Qt=function(){var e=Object(f.c)(F),t=Object(d.g)();return Object(i.useEffect)((function(){null!==e&&0!==e.length||t.push("/login")}),[]),e?Object(T.jsxs)("div",{className:"home",children:[Object(T.jsx)(yt,{}),Object(T.jsx)(mt,{})]}):""};var Xt=function(){return Object(T.jsx)(_.a,{children:Object(T.jsx)("div",{className:"app",children:Object(T.jsxs)(d.d,{children:[Object(T.jsx)(d.b,{exact:!0,path:"/login",component:J}),Object(T.jsx)(d.b,{exact:!0,path:"/signUp",component:$}),Object(T.jsx)(d.b,{exact:!0,path:"/home",render:function(){return Object(T.jsxs)(o.a.Fragment,{children:[Object(T.jsx)(Fe,{}),Object(T.jsx)(Wt,{}),Object(T.jsx)(Qt,{}),Object(T.jsx)(Kt,{})]})}}),Object(T.jsx)(d.a,{from:"/*",to:"/login",status:200})]})})})},Yt=Object(x.a)({reducer:{posts:Xe,login:M,header:ke,friendsBox:De,messages:Dt}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(T.jsx)(o.a.StrictMode,{children:Object(T.jsx)(f.a,{store:Yt,children:Object(T.jsx)(Xt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},94:function(e,t){e.exports={calculateDifferenceTimestamps:function(e,t){var s=t-e;return(s/=1e3)<=60?"Since "+Math.round(s)+" seconds":(s/=60)<=60?"Since "+Math.round(s)+" minutes":(s/=60)<=24?"Since "+Math.round(s)+" hours":(s/=24)<=30?"Since "+Math.round(s)+" days":(s/=30)<=12?"Since "+Math.round(s)+" months":(s/=12,"Since "+Math.round(s)+" years")},generateUniqueId:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}},[[210,1,2]]]);
//# sourceMappingURL=main.4f9dd407.chunk.js.map