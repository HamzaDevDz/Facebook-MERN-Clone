(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{166:function(e,t,s){},167:function(e,t,s){},192:function(e,t,s){},194:function(e,t,s){},195:function(e,t,s){},196:function(e,t,s){},197:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){},200:function(e,t,s){},201:function(e,t,s){},202:function(e,t,s){},203:function(e,t,s){},204:function(e,t,s){},205:function(e,t,s){},206:function(e,t,s){"use strict";s.r(t);var n,a,r,c,i=s(0),o=s.n(i),u=s(20),l=s.n(u),_=(s(166),s(63)),d=s(25),m=s(6),p=s(255),j=(s(167),s(260)),b=s(12),f=s(9),h=s(10),O=s.n(h),x=s(19),g=s(13),v=s(122),N=function(e){return"http://localhost:9000/media/retrieve/?filename="+e},y=new(s.n(v).a)("67843c3bf2c33b4e1d28",{cluster:"eu"}),k=s(16),S=s.n(k),U=Object(g.b)("upload/user",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/upload",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),w=Object(g.b)("/retrieve/user",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/retrieve",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),C=Object(g.b)("user/synchronisation",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/synchronisation",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),q=Object(g.c)({name:"login",initialState:{user:null,err:null,statusLogin:null},reducers:{resetError:function(e){e.err=null},retrieveLocalUser:function(e){var t=localStorage.getItem("user");console.log(t),t?(console.log("user found"),e.user=JSON.parse(t)):console.log("user not found")},logOut:function(e){e.user=null,localStorage.removeItem("user")}},extraReducers:(n={},Object(f.a)(n,U.fulfilled,(function(e,t){e.user=t.payload})),Object(f.a)(n,w.fulfilled,(function(e,t){e.statusLogin=null,localStorage.setItem("user",JSON.stringify(t.payload)),e.user=t.payload})),Object(f.a)(n,w.rejected,(function(e,t){e.statusLogin=null;var s=t.payload.error.split(" "),n=s[s.length-1];e.err=parseInt(n)})),Object(f.a)(n,w.pending,(function(e){e.statusLogin="wait"})),Object(f.a)(n,C.fulfilled,(function(e,t){localStorage.setItem("user",JSON.stringify(t.payload)),e.user=t.payload})),n)}),P=q.actions,B=P.resetError,E=P.retrieveLocalUser,D=P.logOut,F=function(e){return e.login.user},I=function(e){return e.login.err},V=function(e){return e.login.statusLogin},W=q.reducer,M=s(261),R=s(266),A=s(248),L=s(256),T=s(1),z=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(""),r=Object(m.a)(a,2),c=r[0],o=r[1],u=Object(i.useState)(""),l=Object(m.a)(u,2),_=l[0],f=l[1],h=Object(d.g)(),O=Object(b.b)(),x=Object(b.c)(F),g=Object(b.c)(I),v=Object(b.c)(V);Object(i.useEffect)((function(){document.querySelector(".login__form__error").style.display="none"}),[]),Object(i.useEffect)((function(){null!==x?(O(C({idUser:x._id})),h.push("/home")):O(E())}),[x]),Object(i.useEffect)((function(){if(null!==g){switch(document.querySelector(".login__form__error").style.display="flex",g){case 500:f("Internal Server Error");break;case 404:f("Username not found");break;default:f("Incorrect password")}setTimeout((function(){document.querySelector(".login__form__error").style.display="none",f(""),O(B())}),5e3)}}),[g]),Object(i.useEffect)((function(){null!==v?document.querySelector(".login__form__wait").style.display="flex":(document.querySelector(".login__form__wait").style.display="none",n(""),o(""))}),[v]);return Object(T.jsxs)("div",{className:"login",children:[Object(T.jsx)("img",{src:"fb_img.png",alt:"",className:"login__img"}),Object(T.jsx)("form",{className:"login__form",children:Object(T.jsxs)(A.a,{className:"login__form__formControl",children:[Object(T.jsx)(j.a,{label:"Username",variant:"outlined",className:"login__form__username login__form__input",value:s,onChange:function(e){return n(e.target.value)},disabled:null!==v}),Object(T.jsx)(j.a,{label:"Password",variant:"outlined",type:"Password",className:"login__form__password login__form__input",value:c,onChange:function(e){return o(e.target.value)},disabled:null!==v}),Object(T.jsxs)(M.a,{severity:"error",className:"login__form__error",children:[Object(T.jsx)(R.a,{children:"Error"}),_]}),Object(T.jsx)(p.a,{variant:"contained",color:"primary",className:"login__form__btn",onClick:function(e){if(e.preventDefault(),console.log("click login"),s&&c){var t={username:s.toLocaleLowerCase(),password:c};O(w(t))}},disabled:!s||!c||null!==v,type:"submit",children:"Login"}),Object(T.jsx)(L.a,{className:"login__form__wait",style:{display:"none"}})]})}),Object(T.jsx)(p.a,{className:"login__signUp",onClick:function(){h.push("/signUp")},children:"Sign Up"})]})},J=(s(192),s(89)),H=s.n(J),G=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(""),r=Object(m.a)(a,2),c=r[0],o=r[1],u=Object(i.useState)(""),l=Object(m.a)(u,2),_=l[0],f=l[1],h=Object(i.useState)(""),O=Object(m.a)(h,2),x=O[0],g=O[1],v=Object(i.useState)(void 0),N=Object(m.a)(v,2),y=N[0],k=N[1],w=Object(i.useState)(""),C=Object(m.a)(w,2),q=C[0],P=C[1],B=Object(i.useState)(""),E=Object(m.a)(B,2),D=E[0],I=E[1],V=Object(i.useState)(""),W=Object(m.a)(V,2),M=W[0],R=W[1],A=Object(d.g)(),L=Object(b.b)(),z=Object(b.c)(F);Object(i.useEffect)((function(){null!==z&&A.push("/home")}),[z]);return Object(T.jsxs)("div",{className:"signUp",children:[Object(T.jsx)("img",{src:"fb_img.png",alt:"",className:"signUp__img"}),Object(T.jsxs)("form",{className:"signUp__form",children:[Object(T.jsx)(j.a,{label:"Name",variant:"outlined",className:"signUp__form__name signUp__form__input",value:s,onChange:function(e){return n(e.target.value)}}),Object(T.jsx)(j.a,{label:"First Name",variant:"outlined",className:"signUp__form__firstName signUp__form__input",value:c,onChange:function(e){return o(e.target.value)}}),Object(T.jsx)(j.a,{label:"Email",variant:"outlined",className:"signUp__form__email signUp__form__input",value:_,onChange:function(e){return f(e.target.value)}}),Object(T.jsx)(j.a,{label:"Phone Number",variant:"outlined",className:"signUp__form__phone signUp__form__input",value:x,onChange:function(e){return g(e.target.value)}}),Object(T.jsxs)("label",{className:"signUp__form__label signUp__form__input",htmlFor:"video",children:[Object(T.jsxs)(p.a,{variant:"contained",color:"primary",component:"span",children:[Object(T.jsx)(H.a,{className:"signUp__form__label__icon"}),"Upload Photo"]}),Object(T.jsx)("input",{id:"video",style:{display:"none"},type:"file",onChange:function(e){e.target.files[0]&&k(e.target.files[0])}})]}),Object(T.jsx)(j.a,{label:"Username",variant:"outlined",className:"signUp__form__username signUp__form__input",value:q,onChange:function(e){return P(e.target.value)}}),Object(T.jsx)(j.a,{label:"Password",variant:"outlined",className:"signUp__form__password signUp__form__input",type:"Password",value:D,onChange:function(e){return I(e.target.value)}}),Object(T.jsx)(j.a,{label:"Confirm Password",variant:"outlined",className:"signUp__form__passwordConfirm signUp__form__input",type:"Password",value:M,onChange:function(e){return R(e.target.value)}}),Object(T.jsx)(p.a,{variant:"contained",color:"primary",className:"signUp__form__btn",onClick:function(e){if(e.preventDefault(),s&&c&&q&&D&&M)if(D===M){if(y){var t=new FormData;t.append("file",y),S.a.post("http://localhost:9000/media/upload",t).then((function(e){var t={name:s.toUpperCase(),firstName:c,email:_||"",phone:x||"",imgUserName:e.data?e.data:"",username:q.toLowerCase(),password:D};console.log(t),L(U(t)),n(""),o(""),f(""),g(""),P(""),I(""),R("")}))}}else alert("Password is not the same !");else alert("Something wrong !")},disabled:!(s&&c&&q&&D&&M),children:"Sign Up"})]}),Object(T.jsx)(p.a,{className:"signUp__login",onClick:function(){A.push("/login")},children:"Login"})]})},$=(s(194),s(195),s(131)),K=s.n($),Q=s(132),X=s.n(Q),Y=s(92),Z=s.n(Y),ee=s(128),te=s.n(ee),se=s(267),ne=s(93),ae=s.n(ne),re=s(133),ce=s.n(re),ie=s(134),oe=s.n(ie),ue=s(136),le=s.n(ue),_e=s(135),de=s.n(_e),me=s(254),pe=Object(g.b)("user/search",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/search",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),je=Object(g.b)("user/invite",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/invite",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),be=Object(g.b)("user/disinvite",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/disinvite",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),fe=Object(g.b)("user/get",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("http://localhost:9000/user/get/?idUser="+t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),he=Object(g.b)("user/getRequesters",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/requesters",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Oe=Object(g.b)("user/refuseFriend",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/refuseFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),xe=Object(g.c)({name:"header",initialState:{search:{friends:[],statusSearch:!1},notification:{requesters:[]}},reducers:{},extraReducers:(a={},Object(f.a)(a,pe.pending,(function(e,t){e.search.statusSearch=!0,e.search.friends=[]})),Object(f.a)(a,pe.fulfilled,(function(e,t){e.search.statusSearch=!1,e.search.friends=t.payload})),Object(f.a)(a,je.fulfilled,(function(e,t){})),Object(f.a)(a,be.fulfilled,(function(e,t){})),Object(f.a)(a,fe.fulfilled,(function(e,t){e.notification.requesters.push(t.payload)})),Object(f.a)(a,he.fulfilled,(function(e,t){e.notification.requesters=[],e.notification.requesters=t.payload})),a)}),ge=function(e){return e.header.search.friends},ve=function(e){return e.header.search.statusSearch},Ne=function(e){return e.header.notification.requesters},ye=xe.reducer,ke=s(269),Se=s(130),Ue=s.n(Se),we=s(268),Ce=Object(g.b)("user/addFriend",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/addFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),qe=Object(g.b)("user/removeFriend",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/removeFriend",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Pe=Object(g.b)("user/getFriends",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/user/getFriends",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Be=Object(g.c)({name:"friendsBox",initialState:{friends:[]},reducers:{},extraReducers:Object(f.a)({},Pe.fulfilled,(function(e,t){e.friends=t.payload}))}),Ee=function(e){return e.friendsBox.friends},De=Be.reducer,Fe=function(){var e=Object(b.c)(F),t=Object(b.b)(),s=Object(d.g)(),n=Object(i.useState)(!1),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(i.useState)(""),u=Object(m.a)(o,2),l=u[0],_=u[1],p=Object(i.useState)(!1),j=Object(m.a)(p,2),f=j[0],h=j[1],O=Object(i.useState)(!1),x=Object(m.a)(O,2),g=x[0],v=x[1],k=Object(b.c)(ge),S=Object(b.c)(ve),U=Object(b.c)(Ne);Object(i.useEffect)((function(){var e=document.querySelector(".home"),t=document.querySelector(".friendsBox"),s=document.querySelector(".messages");null!==e&&(f?(e.style.filter="brightness(80%)",t.style.filter="brightness(80%)",s.style.filter="brightness(80%)"):(e.style.filter="brightness(100%)",t.style.filter="brightness(100%)",s.style.filter="brightness(100%)"))}),[f]),Object(i.useEffect)((function(){""!==l&&t(pe({search:l,idUser:e._id}))}),[l]);document.onclick=function(e){var t=document.querySelector(".header__search__barSearch__input");if(t===document.activeElement&&h(!0),f&&!t.contains(e.target)){var s=document.querySelector(".header__searchBox");null!==s&&s.contains(e.target)||h(!1)}if(r){var n=document.querySelector(".header__account__btnPlus");if(null!==n)if(!n.contains(e.target))document.querySelector(".header__plus").contains(e.target)||(c(!1),document.querySelector(".header__account__btnPlus__icon").style.color="#6E6F70")}if(g){var a=document.querySelector(".header__account__btnNotification");if(null!==a)if(!a.contains(e.target))document.querySelector(".header__notification").contains(e.target)||(v(!1),document.querySelector(".header__account__btnNotification__icon").style.color="#6E6F70")}};return Object(i.useEffect)((function(){null!==e&&0!==e.length||s.push("/login"),null!==e&&t(he({myIdUser:e._id}));var n=y.subscribe("users");n.bind("inserted",(function(s){console.log("inserted user Client"),null!==e&&t(pe({search:l,idUser:e._id}))})),n.bind("updated",(function(s){console.log("updated user Client"),null!==e&&(t(C({idUser:e._id})),t(pe({search:l,idUser:e._id})),t(he({myIdUser:e._id})),t(Pe({myIdUser:e._id})))}))}),[]),Object(T.jsxs)("div",{className:"header",children:[Object(T.jsxs)("div",{className:"header__search",children:[Object(T.jsx)("img",{className:"header__search__img",src:"icons/facebook_icon.png",alt:""}),Object(T.jsxs)("div",{className:"header__search__barSearch",children:[Object(T.jsx)(te.a,{className:"header__search__barSearch__icon",fontSize:"medium",color:"action"}),Object(T.jsx)("input",{className:"header__search__barSearch__input",placeholder:"Search Friends",type:"text",value:l,onChange:function(e){return _(e.target.value)}})]})]}),f&&0!==l.length?Object(T.jsx)("div",{className:"header__searchBox",children:S?Object(T.jsx)(ke.a,{color:"secondary"}):0!==k.length?k.map((function(s){return Object(T.jsxs)("div",{className:"header__searchBox__friend",children:[Object(T.jsxs)("div",{className:"header__searchBox__friend__information",children:[Object(T.jsx)(se.a,{src:N(s.imgUserName),alt:s.username.toUpperCase(),className:"header__searchBox__friend__information__avatar"}),Object(T.jsxs)("span",{children:[s.firstName," ",s.name]})]}),e.idFriends.includes(String(s._id))?Object(T.jsx)(we.a,{variant:"text",className:"header__searchBox__friend__btn",size:"small",onClick:function(){t(qe({idUser:e._id,idFriend:s._id}))},children:"Remove as friend"}):e.idRequests.includes(String(s._id))?Object(T.jsxs)("div",{className:"header__notification__requester__btn",children:[Object(T.jsx)(we.a,{onClick:function(){t(Ce({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnAccept",size:"small",variant:"text",children:"Accept"}),Object(T.jsx)(we.a,{onClick:function(){t(Oe({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnRefuse",size:"small",color:"secondary",variant:"text",children:"Refuse"})]}):s.idRequests.includes(String(e._id))?Object(T.jsx)(we.a,{variant:"outlined",className:"header__searchBox__friend__btn",size:"small",onClick:function(){t(be({idUser:e._id,idRequest:s._id}))},children:"Disinvite"}):Object(T.jsx)(we.a,{variant:"contained",size:"small",className:"header__searchBox__friend__btn",onClick:function(){t(je({idUser:e._id,idRequest:s._id}))},children:"Invite"})]},s._id)})):Object(T.jsxs)("div",{className:"header__searchBox__noresult",children:[Object(T.jsx)(Ue.a,{className:"header__searchBox__noresult__icon"}),Object(T.jsx)("p",{className:"header__searchBox__noresult__text",children:"No Result"})]})}):"",Object(T.jsxs)("div",{className:"header__nav",children:[Object(T.jsxs)("div",{className:"header__nav__btn header__nav__home selected",children:[Object(T.jsx)(K.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"}),Object(T.jsx)("span",{})]}),Object(T.jsx)("div",{className:"header__nav__btn header__nav__video",children:Object(T.jsx)(X.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"})}),Object(T.jsx)("div",{className:"header__nav__btn header__nav__marketplace",children:Object(T.jsx)(Z.a,{className:"header__nav__btn__icon",color:"primary",fontSize:"medium"})})]}),Object(T.jsxs)("div",{className:"header__account",children:[Object(T.jsxs)("div",{className:"header__account__user",children:[Object(T.jsx)(se.a,{className:"header__account__user__avatar",alt:"",src:N(e?e.imgUserName:"")}),Object(T.jsxs)("strong",{className:"header__account__user__text",children:[e?e.firstName:""," ",e?e.name:""]})]}),Object(T.jsx)(me.a,{className:"header__account__btn header__account__btnChat",children:Object(T.jsx)(ae.a,{className:"header__account__btn__icon",fontSize:"small",color:"action"})}),Object(T.jsx)(me.a,{className:"header__account__btn header__account__btnNotification",onClick:function(){g?(v(!1),document.querySelector(".header__account__btnNotification__icon").style.color="#6E6F70"):(v(!0),document.querySelector(".header__account__btnNotification__icon").style.color="blue")},children:Object(T.jsx)(ce.a,{className:"header__account__btn__icon header__account__btnNotification__icon",fontSize:"small",color:"action"})}),Object(T.jsx)(me.a,{className:"header__account__btn header__account__btnPlus",onClick:function(e){r?(c(!1),document.querySelector(".header__account__btnPlus__icon").style.color="#6E6F70"):(c(!0),document.querySelector(".header__account__btnPlus__icon").style.color="blue")},children:Object(T.jsx)(oe.a,{className:"header__account__btn__icon header__account__btnPlus__icon",fontSize:"small",color:"action"})})]}),r?Object(T.jsxs)("div",{className:"header__plus",children:[Object(T.jsxs)("div",{className:"header__plus__btn header__plus__profile",children:[Object(T.jsx)(se.a,{className:"header__plus__profile__avatar",alt:e.username[0].toUpperCase(),src:N(e.imgUserName)}),Object(T.jsxs)("div",{className:"header__plus__profile__text",children:[Object(T.jsxs)("strong",{children:[e.firstName," ",e.name]}),Object(T.jsx)("p",{className:"header__plus__profile__text__placeholder",children:"Go to the profile"})]})]}),Object(T.jsxs)("div",{className:"header__plus__btn header__plus__settings",children:[Object(T.jsx)(de.a,{className:"header__plus__btn__icon"})," Setting"]}),Object(T.jsxs)("div",{className:"header__plus__btn header__plus__logout",onClick:function(){t(D()),s.push("/login")},children:[Object(T.jsx)(le.a,{className:"header__plus__btn__icon"}),"Log Out"]})]}):"",g?Object(T.jsx)("div",{className:"header__notification",children:0!==U.length?U.map((function(s){return Object(T.jsxs)("div",{className:"header__notification__requester",children:[Object(T.jsxs)("div",{className:"header__notification__requester__information",children:[Object(T.jsx)(se.a,{className:"header__notification__requester__information__avatar",src:N(s.imgUserName),alt:s.username[0].toUpperCase()}),s.firstName," ",s.name]}),Object(T.jsxs)("div",{className:"header__notification__requester__btn",children:[Object(T.jsx)(we.a,{onClick:function(){t(Ce({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnAccept",size:"small",variant:"text",children:"Accept"}),Object(T.jsx)(we.a,{onClick:function(){t(Oe({idUser:e._id,idRequest:s._id}))},className:"header__notification__requester__btnRefuse",size:"small",color:"secondary",variant:"text",children:"Refuse"})]})]},"request-"+s._id)})):Object(T.jsx)("div",{className:"header__notification__noresult",children:"No one invited you !"})}):""]})},Ie=(s(196),s(137)),Ve=s.n(Ie),We=Object(g.b)("post/getPosts",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/post/getPosts",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Me=Object(g.b)("posts/upload",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/post/upload",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Re=Object(g.b)("posts/comment/upload",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/post/comment/upload",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Ae=Object(g.b)("post/like",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/post/like",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Le=Object(g.b)("post/dislike",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/post/dislike",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Te=Object(g.b)("post/comment/like",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/post/comment/like",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),ze=Object(g.b)("post/comment/dislike",function(){var e=Object(x.a)(O.a.mark((function e(t,s){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/post/comment/dislike",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}()),Je=Object(g.c)({name:"posts",initialState:{posts:[],statusLikePost:!1,statusLikeComment:!1},reducers:{setLikePostById:{reducer:function(e,t){var s=t.payload.idPost,n=t.payload.username,a=e.posts.findIndex((function(e){return e._id===s}));-1!==a&&(e.posts[a].likes.includes(n)?e.posts[a].likes.splice(e.posts[a].likes.indexOf(n),1):e.posts[a].likes.push(n))},prepare:function(e,t){return{payload:{idPost:e,username:t}}}},setLikeCommentById:{reducer:function(e,t){var s=e.posts.findIndex((function(e){return e._id===t.payload.idPost}));if(-1!==s){var n=e.posts[s].comments.findIndex((function(e){return e._id===t.payload.idComment}));-1!==n&&(e.posts[s].comments[n].likes.includes(t.payload.username)?e.posts[s].comments[n].likes.splice(e.posts[s].comments[n].likes.indexOf(t.payload.username),1):e.posts[s].comments[n].likes.push(t.payload.username))}},prepare:function(e,t,s){return{payload:{idPost:e,idComment:t,username:s}}}}},extraReducers:(r={},Object(f.a)(r,We.fulfilled,(function(e,t){e.posts=t.payload})),Object(f.a)(r,Me.fulfilled,(function(e,t){console.log("Post upload successfully !")})),Object(f.a)(r,Re.fulfilled,(function(e,t){console.log("Comment upload successfully !")})),Object(f.a)(r,Ae.fulfilled,(function(e,t){})),Object(f.a)(r,Ae.pending,(function(e,t){})),Object(f.a)(r,Le.fulfilled,(function(e,t){})),Object(f.a)(r,Le.pending,(function(e,t){})),Object(f.a)(r,Te.fulfilled,(function(e,t){})),Object(f.a)(r,ze.fulfilled,(function(e,t){})),r)}),He=Je.actions,Ge=He.setLikeCommentById,$e=He.setLikePostById,Ke=function(e){return e.posts.posts},Qe=Je.reducer,Xe=function(){var e=Object(i.useState)(""),t=Object(m.a)(e,2),s=t[0],n=t[1],a=Object(i.useState)(void 0),r=Object(m.a)(a,2),c=(r[0],r[1]),o=Object(i.useState)(void 0),u=Object(m.a)(o,2),l=u[0],_=u[1],d=Object(i.useState)(void 0),p=Object(m.a)(d,2),j=(p[0],p[1]),f=Object(b.c)(F),h=Object(i.useState)(""),O=Object(m.a)(h,2),x=O[0],g=O[1],v=Object(b.b)();return Object(i.useEffect)((function(){g(N(f.imgUserName))}),[]),Object(T.jsx)("form",{className:"feed__upload",children:Object(T.jsxs)(A.a,{style:{width:"98%"},children:[Object(T.jsxs)("div",{className:"feed__upload__caption",children:[Object(T.jsx)(se.a,{className:"feed__upload__caption__avatar",alt:"H",src:x}),Object(T.jsx)("input",{type:"text",placeholder:"Caption",className:"feed__upload__caption__input",value:s,onChange:function(e){return n(e.target.value)}})]}),Object(T.jsxs)("div",{className:"feed__upload__multi",children:[Object(T.jsxs)("label",{className:"feed__upload__multi__label feed__upload__multi__image",htmlFor:"media",children:[Object(T.jsx)(H.a,{className:"feed__upload__multi__label__icon",color:"error"}),"Image / Video",Object(T.jsx)("input",{id:"media",style:{display:"none"},type:"file",onChange:function(e){e.target.files[0]&&_(e.target.files[0])}})]}),Object(T.jsxs)("label",{className:"feed__upload__multi__label feed__upload__multi__mood",htmlFor:"mood",children:[Object(T.jsx)(Ve.a,{className:"feed__upload__multi__label__icon",color:"error"}),"Mood"]})]}),Object(T.jsx)("button",{type:"submit",className:"feed__upload__btn",style:{display:"none"},onClick:function(e){if(e.preventDefault(),s){var t={idUser:f._id,username:f.username,imgUserName:f.imgUserName,caption:s,timestamp:Date.now(),likes:[],comments:[],mood:""};if(l){var a=new FormData;a.append("file",l),S.a.post("http://localhost:9000/media/upload",a).then((function(e){t.imgPost=e.data,v(Me(t))}))}n(""),_(void 0),c(void 0),j(void 0)}},children:"Upload"})]})})},Ye=(s(197),s(198),s(95)),Ze=s.n(Ye),et=s(139),tt=s.n(et),st=(s(199),s(94)),nt=function(e){var t=e.idPost,s=e.idComment,n=(e.imgUserName,e.username),a=e.timestamp,r=e.text,c=e.likes,o=Object(b.b)(),u=Object(b.c)(F),l=Object(i.useState)(0),_=Object(m.a)(l,2),d=_[0],p=_[1],j=Object(i.useState)(0),f=Object(m.a)(j,2),h=f[0],O=f[1];Object(i.useEffect)((function(){c.includes(u.username)?document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="blue":document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="gray"}),[]);return Object(T.jsxs)("div",{className:"comment",id:s,children:[Object(T.jsx)(se.a,{className:"comment__avatar",alt:u.username[0].toUpperCase(),src:N(u.imgUserName)}),Object(T.jsxs)("div",{className:"comment__userAndTextAndStates",children:[Object(T.jsx)("strong",{className:"comment__userAndTextAndStates__user",children:n}),Object(T.jsx)("p",{className:"comment__userAndTextAndStates__text",children:r}),Object(T.jsxs)("div",{className:"comment__userAndTextAndStates__states",children:[Object(T.jsxs)("div",{className:"comment__userAndTextAndStates__states__likes",onClick:function(){clearTimeout(d),console.log(s),c.includes(u.username)?(document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="gray",1===h?O(0):(O(1),p(setTimeout((function(){o(ze({idPost:t,idComment:s,username:u.username})),O(0)}),3e3)))):(document.getElementById("comment_likes_".concat(t,"_").concat(s)).style.color="blue",1===h?O(0):(O(1),p(setTimeout((function(){o(Te({idPost:t,idComment:s,username:u.username})),O(0)}),3e3)))),o(Ge(t,s,u.username))},children:[Object(T.jsx)(Ze.a,{className:"comment__userAndTextAndStates__states__likes__icon",fontSize:"small",id:"comment_likes_".concat(t,"_").concat(s)}),c.length]}),Object(T.jsx)("div",{className:"comment__userAndTextAndStates__states__timestamp",children:Object(st.calculateDifferenceTimestamps)(a,Date.now())})]})]})]})},at=(s(200),s(252)),rt=function(e){var t=e.idPost,s=Object(b.c)(F),n=Object(i.useState)(""),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(b.b)();return Object(T.jsx)("form",{className:"feed__posts__post__uploadComment",children:Object(T.jsxs)(A.a,{className:"feed__posts__post__uploadComment__formControl",children:[Object(T.jsx)(se.a,{className:"feed__posts__post__uploadComment__avatar",alt:s.username[0].toUpperCase(),src:N(s.imgUserName)}),Object(T.jsx)(at.a,{className:"feed__posts__post__uploadComment__input",placeholder:"Comment",value:r,onChange:function(e){return c(e.target.value)}}),Object(T.jsx)("button",{className:"feed__posts__post__uploadComment__btn",style:{display:"none"},onClick:function(e){e.preventDefault();var n={idPost:t,comment:{username:s.username,imgUserName:s.imgUserName,text:r,timestamp:Date.now(),likes:[]}};o(Re(n)),c("")}})]})})},ct=s(138),it=s.n(ct),ot=s(140),ut=s.n(ot),lt=function(e){var t=e.idPost,s=e.imgUser,n=e.username,a=e.timestamp,r=e.caption,c=e.imgPost,o=e.likes,u=e.comments,l=Object(b.b)(),_=Object(b.c)(F),d=Object(i.useState)(0),j=Object(m.a)(d,2),f=j[0],h=j[1],O=Object(i.useState)(0),x=Object(m.a)(O,2),g=x[0],v=x[1],y=Object(i.useState)(!0),k=Object(m.a)(y,2),S=k[0],U=k[1];Object(i.useEffect)((function(){o.includes(_.username)?document.getElementById("post_likes_".concat(t)).style.color="blue":document.getElementById("post_likes_".concat(t)).style.color="gray"}),[]);return Object(T.jsxs)("div",{className:"feed__posts__post",id:"feed__posts__post__"+t,children:[Object(T.jsxs)("div",{className:"feed__posts__post__head",children:[Object(T.jsx)(se.a,{className:"feed__posts__post__head__avatar",alt:n[0],src:N(s)}),Object(T.jsxs)("div",{className:"feed__posts__post__head__user",children:[Object(T.jsx)("strong",{className:"feed__posts__post__head__user__username",children:n}),Object(T.jsx)("span",{className:"feed__posts__post__head__user__timestamp",children:Object(st.calculateDifferenceTimestamps)(a,Date.now())})]})]}),Object(T.jsx)("div",{className:"feed__posts__post__caption",children:r}),null!==c?[".jpg",".jpeg",".png"].includes(it.a.extname(c))?Object(T.jsx)("img",{src:N(c),alt:"",className:"feed__posts__post__media"}):Object(T.jsx)("video",{controls:!0,className:"feed__posts__post__media",children:Object(T.jsx)("source",{src:N(c)})}):"",Object(T.jsxs)("div",{className:"feed__posts__post__states",children:[Object(T.jsxs)(me.a,{className:"feed__posts__post__states__likes",onClick:function(){clearTimeout(f),o.includes(_.username)?(document.getElementById("post_likes_".concat(t)).style.color="gray",1===g?v(0):(v(1),h(setTimeout((function(){l(Le({idPost:t,username:_.username})),v(0)}),3e3)))):(document.getElementById("post_likes_".concat(t)).style.color="blue",1===g?v(0):(v(1),h(setTimeout((function(){l(Ae({idPost:t,username:_.username})),v(0)}),3e3)))),l($e(t,_.username))},children:[Object(T.jsx)(Ze.a,{className:"feed__posts__post__states__likes__icon",id:"post_likes_".concat(t)}),o.length]}),Object(T.jsxs)(me.a,{className:"feed__posts__post__states__comments",onClick:function(e){U(!S)},children:[Object(T.jsx)(tt.a,{className:"feed__posts__post__states__comments__icon",style:{color:"red"}}),Object(T.jsx)("span",{children:u.length})]})]}),Object(T.jsx)(rt,{idPost:t}),0!==u.length?S?Object(T.jsx)("div",{className:"feed__posts__post__comments",children:u.map((function(e){return Object(T.jsx)(nt,{idPost:t,idComment:e._id,imgUserName:e.imgUserName,username:e.username,timestamp:e.timestamp,text:e.text,likes:e.likes},e._id)}))}):Object(T.jsx)(p.a,{className:"feed__posts__post__moreComments",variant:"contained",color:"primary",onClick:function(){return U(!0)},children:Object(T.jsx)(ut.a,{fontSize:"medium"})}):""]})},_t=function(){var e=Object(b.c)(Ke),t=Object(b.c)(F),s=Object(b.b)();return Object(i.useEffect)((function(){var e=y.subscribe("posts");e.bind("inserted",(function(e){s(We({idUser:t._id,friends:t.idFriends}))})),e.bind("updated",(function(e){s(We({idUser:t._id,friends:t.idFriends}))}))}),[]),Object(i.useEffect)((function(){s(We({idUser:t._id,friends:t.idFriends}))}),[]),Object(T.jsx)("div",{className:"feed__posts",children:e&&0!==e.length?e.map((function(e){return Object(T.jsx)(lt,{idPost:e._id,imgUser:e.imgUserName,username:e.username,timestamp:e.timestamp,caption:e.caption,imgPost:e.imgPost,comments:e.comments,likes:e.likes,videoPost:e.videoPost,mood:e.mood},e._id)})):""})},dt=(s(201),function(){return Object(T.jsxs)("div",{className:"feed",children:[Object(T.jsx)(Xe,{}),Object(T.jsx)(_t,{})]})}),mt=(s(202),s(141)),pt=s.n(mt),jt=s(142),bt=s.n(jt),ft=s(143),ht=s.n(ft),Ot=s(144),xt=s.n(Ot),gt=s(145),vt=s.n(gt),Nt=function(){var e=Object(b.c)(F),t=Object(i.useState)(""),s=Object(m.a)(t,2),n=s[0],a=s[1];return Object(i.useEffect)((function(){a(N(e.imgUserName))}),[]),Object(T.jsxs)("div",{className:"sidebar",children:[Object(T.jsxs)("div",{className:"sidebar__user",children:[Object(T.jsx)(se.a,{className:"sidebar__user__avatar",alt:"H",src:n}),Object(T.jsxs)("strong",{className:"sidebar__user__text",children:[e.firstName," ",e.name]})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__covid",children:[Object(T.jsx)(pt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"COVID-19 Information Center"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__pages",children:[Object(T.jsx)(bt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Pages"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__friends",children:[Object(T.jsx)(ht.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Friends"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__messengers",children:[Object(T.jsx)(ae.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Messengers"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__marketplace",children:[Object(T.jsx)(Z.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Marketplace"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__videos",children:[Object(T.jsx)(xt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"Videos"})]}),Object(T.jsxs)("div",{className:"sidebar__point sidebar__more",children:[Object(T.jsx)(vt.a,{className:"sidebar__point__icon",style:{color:"#3F51B5"}}),Object(T.jsx)("strong",{className:"sidebar__user__text",children:"More"})]})]})},yt=(s(203),s(265)),kt=Object(g.b)("messages/getDiscussion",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/messages/getDiscussion",{idUser1:t.idUser1,idUser2:t.idUser2}).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),St=Object(g.b)("messages/addMessage",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/messages/addMessage",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),Ut=Object(g.b)("messages/synchMessages",function(){var e=Object(x.a)(O.a.mark((function e(t,s){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:9000/messages/synchMessages",t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",s.rejectWithValue({error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}}()),wt=Object(g.c)({name:"messages",initialState:{discussions:[],statusUpDateDiscussions:!1},reducers:{cleanDiscussion:function(e,t){1===e.discussions.length?e.discussions=[]:e.discussions.splice(t.payload,1)},resetStatusUpDateDiscussions:function(e,t){e.statusUpDateDiscussions=!1}},extraReducers:(c={},Object(f.a)(c,kt.fulfilled,(function(e,t){null!==t.payload&&(-1===e.discussions.findIndex((function(e){return e.messages._id===t.payload.messages._id}))&&(e.discussions.push(t.payload),e.statusUpDateDiscussions=!0))})),Object(f.a)(c,Ut.fulfilled,(function(e,t){var s=e.discussions.findIndex((function(e){return e.messages._id===t.payload._id}));-1!==s&&(e.discussions[s].messages=t.payload),e.statusUpDateDiscussions=!0})),c)}),Ct=wt.actions,qt=Ct.cleanDiscussion,Pt=Ct.resetStatusUpDateDiscussions,Bt=function(e){return e.messages.discussions},Et=function(e){return e.messages.statusUpDateDiscussions},Dt=wt.reducer,Ft=function(){var e=Object(b.b)(),t=Object(b.c)(Ee),s=Object(b.c)(F);return Object(i.useEffect)((function(){null!==s&&e(Pe({myIdUser:s._id}))}),[]),Object(T.jsxs)("div",{className:"friendsBox",children:[Object(T.jsx)("p",{className:"friendsBox__title",children:"Contacts"}),0!==t.length?t.map((function(t){return Object(T.jsxs)("div",{className:"friendsBox__friend",onClick:function(){e(kt({idUser1:s._id,idUser2:t._id}))},children:[Object(T.jsx)(yt.a,{src:N(t.imgUserName),alt:t.username[0].toUpperCase(),className:"friendsBox__friend__avatar"}),Object(T.jsxs)("span",{className:"friendsBox__friend__text",children:[t.name," ",t.firstName]})]},"friend-"+t._id)})):Object(T.jsx)("div",{className:"friendsBox__noFriends",children:"No friends yet"})]})},It=(s(204),s(205),s(270)),Vt=s(146),Wt=s.n(Vt),Mt=s(263),Rt=s(147),At=s.n(Rt),Lt=function(e){var t=e.friend,s=e.messages,n=e.index,a=Object(b.b)(),r=Object(b.c)(F),c=Object(i.useState)(""),o=Object(m.a)(c,2),u=o[0],l=o[1],_=Object(i.useState)(!1),d=Object(m.a)(_,2),p=d[0],j=d[1];return Object(T.jsxs)("div",{className:"messages__discussion",children:[Object(T.jsxs)("div",{className:"messages__discussion__information",onClick:function(){console.log("click "),j(!p)},children:[Object(T.jsx)(yt.a,{src:N(t.imgUserName),alt:t.name[0].toUpperCase(),className:"messages__discussion__information__avatar"}),t.firstName," ",t.name,Object(T.jsx)(It.a,{className:"messages__discussion__information__exit",color:"success",onClick:function(){a(qt(n))},children:Object(T.jsx)(Wt.a,{})})]}),p?"":Object(T.jsx)("div",{className:"messages__discussion__main",children:null!==s&&0!==s.length?s.messages.map((function(e){return e.idUser===r._id?Object(T.jsx)("div",{className:"messages__discussion__main__msg messages__discussion__main__myMsg",children:e.message},"msg-"+e._id):Object(T.jsx)("div",{className:"messages__discussion__main__msg messages__discussion__main__friendMsg",children:e.message},"msg-"+e._id)})):""}),p?"":Object(T.jsx)("form",{className:"messages__discussion__form",children:Object(T.jsxs)(Mt.a,{className:"messages__discussion__form__control",children:[Object(T.jsx)("input",{className:"messages__discussion__form__control__input",placeholder:"Message",value:u,onChange:function(e){return l(e.target.value)},type:"text",autoFocus:!0}),Object(T.jsx)(It.a,{type:"submit",onClick:function(e){e.preventDefault();var t={idMessages:s._id,message:{message:u,timestamp:Date.now(),idUser:r._id,likes:[]}};a(St(t)),l("")},color:"primary",disabled:!u,className:"messages__discussion__form__control__btn",children:Object(T.jsx)(At.a,{})})]})})]},"discussion-"+t.id+"-"+r._id)},Tt=function(){var e=Object(b.b)(),t=Object(b.c)(Bt),s=Object(b.c)(Et),n=Object(i.useState)(!1),a=Object(m.a)(n,2),r=a[0],c=a[1],o=Object(b.c)(F);return Object(i.useEffect)((function(){var e=y.subscribe("messages");e.bind("inserted",(function(e){console.log("Inserted messages"),c(!0)})),e.bind("updated",(function(e){console.log("Update messages"),c(!0)}))}),[]),Object(i.useEffect)((function(){console.log(t),t.forEach((function(t,s){var n={idUser1:o._id,idUser2:t.friend.id};e(Ut(n))})),c(!1)}),[r]),Object(i.useEffect)((function(){var t=document.querySelectorAll(".messages__discussion__main");null!==t&&t.forEach((function(e){e.scrollTop=e.scrollHeight})),e(Pt())}),[s]),Object(T.jsx)("div",{className:"messages",children:0!==t.length?t.map((function(e,t){return Object(T.jsx)(Lt,{friend:e.friend,messages:e.messages,index:t})})):""})},zt=function(){var e=Object(b.c)(F),t=Object(d.g)();return Object(i.useEffect)((function(){null!==e&&0!==e.length||t.push("/login")}),[]),e?Object(T.jsxs)("div",{className:"home",children:[Object(T.jsx)(Nt,{}),Object(T.jsx)(dt,{})]}):""};var Jt=function(){return Object(T.jsx)(_.a,{children:Object(T.jsx)("div",{className:"app",children:Object(T.jsxs)(d.d,{children:[Object(T.jsx)(d.b,{exact:!0,path:"/login",component:z}),Object(T.jsx)(d.b,{exact:!0,path:"/signUp",component:G}),Object(T.jsx)(d.b,{exact:!0,path:"/home",render:function(){return Object(T.jsxs)(o.a.Fragment,{children:[Object(T.jsx)(Fe,{}),Object(T.jsx)(Ft,{}),Object(T.jsx)(zt,{}),Object(T.jsx)(Tt,{})]})}}),Object(T.jsx)(d.a,{from:"/*",to:"/login",status:200})]})})})},Ht=Object(g.a)({reducer:{posts:Qe,login:W,header:ye,friendsBox:De,messages:Dt}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(T.jsx)(o.a.StrictMode,{children:Object(T.jsx)(b.a,{store:Ht,children:Object(T.jsx)(Jt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},94:function(e,t){e.exports={calculateDifferenceTimestamps:function(e,t){var s=t-e;return(s/=1e3)<=60?"Since "+Math.round(s)+" seconds":(s/=60)<=60?"Since "+Math.round(s)+" minutes":(s/=60)<=24?"Since "+Math.round(s)+" hours":(s/=24)<=30?"Since "+Math.round(s)+" days":(s/=30)<=12?"Since "+Math.round(s)+" months":(s/=12,"Since "+Math.round(s)+" years")},generateUniqueId:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}},[[206,1,2]]]);
//# sourceMappingURL=main.8fdd6886.chunk.js.map